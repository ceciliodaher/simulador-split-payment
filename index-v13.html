<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Impacto do Split Payment no Fluxo de Caixa</title>
    <style>
        :root {
            --primary-color: #3498db;
            --secondary-color: #2ecc71;
            --accent-color: #e74c3c;
            --dark-accent: #f39c12;
            --highlight-color: #9b59b6;
            --light-bg: #f8f9fa;
            --dark-text: #343a40;
            --gray-text: #6c757d;
            --light-border: #dee2e6;
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: var(--dark-text);
            line-height: 1.6;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        .header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--light-border);
        }

        .logo {
            height: 60px;
            margin-right: 20px;
        }

        h1, h2, h3 {
            color: var(--primary-color);
        }

        h1 {
            text-align: center;
            margin-bottom: 10px;
        }

        h2 {
            margin: 15px 0;
            font-size: 1.5em;
        }

        .tab-container {
            width: 100%;
            margin-bottom: 20px;
        }

        .tab-buttons {
            display: flex;
            border-bottom: 1px solid var(--light-border);
        }

        .tab-button {
            padding: 10px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            color: var(--gray-text);
            transition: all 0.3s;
        }

        .tab-button.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .tab-content.active {
            display: block;
        }

        .group-box {
            border: 1px solid var(--light-border);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            background-color: #fff;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .group-box h3 {
            color: var(--dark-text);
            font-size: 18px;
            margin-bottom: 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-border);
        }

        .form-row {
            display: flex;
            flex-wrap: wrap;
            margin: 0 -10px;
            margin-bottom: 15px;
        }

        .form-column {
            flex: 1;
            min-width: 250px;
            padding: 0 10px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--dark-text);
        }

        input, select {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--light-border);
            border-radius: 4px;
            font-size: 14px;
            transition: border-color 0.3s;
        }

        input:focus, select:focus {
            border-color: var(--primary-color);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.25);
        }

        .input-group {
            display: flex;
            align-items: center;
        }

        .input-group input {
            flex: 1;
            border-top-right-radius: 0;
            border-bottom-right-radius: 0;
        }

        .input-group-append {
            display: flex;
            align-items: center;
        }

        .input-group-text {
            padding: 10px;
            background-color: #f8f9fa;
            border: 1px solid var(--light-border);
            border-left: none;
            border-top-right-radius: 4px;
            border-bottom-right-radius: 4px;
            color: var(--gray-text);
            font-size: 14px;
        }

        .radio-group {
            display: flex;
            gap: 15px;
        }

        .radio-item {
            display: flex;
            align-items: center;
        }

        .radio-item input[type="radio"] {
            width: auto;
            margin-right: 5px;
        }

        .buttons-container {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 30px;
        }

        button {
            padding: 12px 24px;
            border: none;
            border-radius: 4px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        button.primary {
            background-color: var(--primary-color);
            color: white;
            box-shadow: 0 4px 6px rgba(52, 152, 219, 0.3);
        }

        button.secondary {
            background-color: var(--light-bg);
            color: var(--dark-text);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        button.primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(52, 152, 219, 0.4);
        }

        button.secondary:hover {
            background-color: #e2e6ea;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0, 0, 0, 0.15);
        }

        .footer {
            text-align: center;
            color: var(--gray-text);
            font-size: 12px;
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid var(--light-border);
        }

        @media (max-width: 768px) {
            .form-column {
                flex: 100%;
            }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
		/* Adicionar ao estilo existente */
		.faq-answer {
			display: none;
			padding: 10px 15px 15px;
			background-color: #f8f9fa;
			border-radius: 0 0 8px 8px;
			margin-top: -5px;
		}
		
		.faq-question {
			cursor: pointer;
			padding: 12px 15px;
			background-color: #edf2f7;
			border-radius: 8px;
			font-weight: 600;
			position: relative;
		}
		
		.faq-question:after {
			content: '+';
			position: absolute;
			right: 15px;
			top: 50%;
			transform: translateY(-50%);
		}
		
		.faq-question.active:after {
			content: '-';
		}
		
		/* Estilos para a navegação de ajuda */
		.help-nav-link {
			cursor: pointer;
			display: block;
			padding: 8px 12px;
			border-radius: 4px;
			text-decoration: none;
			color: var(--dark-text);
		}
		
		.help-nav-link.active {
			background-color: var(--primary-color);
			color: white;
		}
		
		.help-section {
			display: none;
		}
		
		.help-section.active {
			display: block;
		}
	<link rel="stylesheet" href="css/split-payment-styles.css">
    <link rel="stylesheet" href="css/tab-navigation-css.css">
        /* Estilos específicos para campos com formatação monetária */
        .money-input-container {
            position: relative;
        }
        
        .money-input {
            padding-left: 30px !important; /* Espaço para o símbolo da moeda */
            text-align: right !important;
            font-family: 'Consolas', monospace;
        }
        
        .money-prefix {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            color: #6c757d;
            pointer-events: none; /* Permite clicar através do prefixo */
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <img src="imagens/expertzy-it.png" alt="Logo Expertzy" class="logo">
            <h1>Simulador de Impacto do Split Payment no Fluxo de Caixa</h1>
        </div>

        <!-- Sistema de Abas - Unificado -->
        <div class="tab-container">
            <div class="tab-buttons">
                <button class="tab-button active" data-tab="simulacao-principal">Simulação Principal</button>
                <button class="tab-button" data-tab="configuracoes-setoriais">Configurações Setoriais</button>
                <button class="tab-button" data-tab="estrategias-mitigacao">Estratégias de Mitigação</button>
                <button class="tab-button" data-tab="memoria-calculo">Memória de Cálculo</button>
                <button class="tab-button" data-tab="ajuda-documentacao">Ajuda e Documentação</button>
            </div>

            <!-- Conteúdo das abas vai aqui -->
			<!-- Conteúdo da aba Simulação Principal -->
			<div id="simulacao-principal" class="tab-content active">
				<h2>Simulação Principal</h2>
				<div id="simulacao-form">
					<!-- Dados Gerais da Empresa -->
					<div class="group-box">
						<h3>Dados Gerais da Empresa</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="faturamento">Faturamento:</label>
									<div class="input-group">
										<input type="number" id="faturamento" name="faturamento" min="0" step="1000" value="" class="money-input" required>
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label>Período:</label>
									<div class="radio-group">
										<div class="radio-item">
											<input type="radio" id="periodo-mensal" name="periodo" value="mensal" checked>
											<label for="periodo-mensal">Mensal</label>
										</div>
										<div class="radio-item">
											<input type="radio" id="periodo-anual" name="periodo" value="anual">
											<label for="periodo-anual">Anual</label>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="setor">Setor de Atividade:</label>
									<select id="setor" name="setor" required>
										<option value="">Selecione...</option>
										<option value="comercio">Comércio Varejista</option>
										<option value="industria">Indústria</option>
										<option value="alimenticio">Indústria Alimentícia</option>
										<option value="servicos">Serviços</option>
										<option value="construcao">Construção Civil</option>
										<option value="agro">Agronegócio</option>
										<option value="saude">Saúde</option>
										<option value="educacao">Educação</option>
										<option value="tecnologia">Tecnologia</option>
										<option value="transporte">Transporte e Logística</option>
										<option value="outro">Outro</option>
									</select>
								</div>
								<div class="form-group">
									<label for="regime">Regime Tributário:</label>
									<select id="regime" name="regime" required>
										<option value="">Selecione...</option>
										<option value="simples">Simples Nacional</option>
										<option value="presumido">Lucro Presumido</option>
										<option value="real">Lucro Real</option>
									</select>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="margem">Margem Operacional (%):</label>
									<div class="input-group">
										<input type="text" id="margem" name="margem" min="0" max="100" step="0.1" value="" class="percent-input" style="background-color: #f8f9fa;">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Ciclo Financeiro Atual -->					
					<div class="group-box">
						<h3>Ciclo Financeiro Atual</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="pmr">Prazo Médio de Recebimento (PMR):</label>
									<div class="input-group">
										<input type="number" id="pmr" name="pmr" min="0" step="1" value="30">
										<div class="input-group-append">
											<span class="input-group-text">dias</span>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label for="pmp">Prazo Médio de Pagamento (PMP):</label>
									<div class="input-group">
										<input type="number" id="pmp" name="pmp" min="0" step="1" value="30">
										<div class="input-group-append">
											<span class="input-group-text">dias</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="pme">Prazo Médio de Estoque (PME):</label>
									<div class="input-group">
										<input type="number" id="pme" name="pme" min="0" step="1" value="30">
										<div class="input-group-append">
											<span class="input-group-text">dias</span>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label for="ciclo-financeiro">Ciclo Financeiro:</label>
									<div class="input-group">
										<input type="number" id="ciclo-financeiro" name="ciclo-financeiro" readonly>
										<div class="input-group-append">
											<span class="input-group-text">dias</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="perc-vista">Percentual de Vendas à Vista (%):</label>
									<div class="input-group">
										<input type="number" id="perc-vista" name="perc-vista" min="0" max="100" step="0.1" value="" class="percent-input">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
								<div class="form-group">
									<label for="perc-prazo">Percentual de Vendas a Prazo (%):</label>
									<div class="input-group">
										<input type="text" id="perc-prazo" name="perc-prazo" readonly class="percent-input" style="background-color: #f8f9fa;">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Parâmetros Tributários -->
					<div class="group-box">
						<h3>Parâmetros Tributários</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="aliquota">Alíquota Efetiva de Tributos sobre Faturamento:</label>
									<div class="input-group">
										<input type="number" id="aliquota" name="aliquota" min="0" max="100" step="0.1" value="26.5">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="tipo-operacao">Tipo de Operação Predominante:</label>
									<select id="tipo-operacao" name="tipo-operacao" required>
										<option value="">Selecione...</option>
										<option value="b2b">B2B (Empresa para Empresa)</option>
										<option value="b2c">B2C (Empresa para Consumidor)</option>
										<option value="mista">Mista</option>
									</select>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="creditos">Créditos Tributários Médios Mensais:</label>
									<div class="input-group">
										<input type="number" id="creditos" name="creditos" min="0" step="100" value="0" class="money-input">
										<div class="input-group-append">
											<span class="input-group-text">R$</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					<!-- Parâmetros de Simulação -->
					<div class="group-box">
						<h3>Parâmetros de Simulação</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="data-inicial">Data Inicial:</label>
									<input type="date" id="data-inicial" name="data-inicial" value="2026-01-01" min="2026-01-01">
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="data-final">Data Final:</label>
									<input type="date" id="data-final" name="data-final" value="2033-12-31" min="2026-01-01">
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="cenario">Cenário de Crescimento:</label>
									<select id="cenario" name="cenario" required>
										<option value="">Selecione...</option>
										<option value="conservador">Conservador (1-3% a.a.)</option>
										<option value="moderado">Moderado (4-6% a.a.)</option>
										<option value="otimista">Otimista (7-10% a.a.)</option>
										<option value="personalizado">Personalizado</option>
									</select>
								</div>
							</div>
						</div>
						<!-- Cenário Personalizado (aparece apenas quando "Personalizado" é selecionado) -->
						<div id="cenario-personalizado" style="display: none;">
							<div class="form-row">
								<div class="form-column">
									<div class="form-group">
										<label for="taxa-crescimento">Taxa de Crescimento Anual (%):</label>
										<div class="input-group">
											<input type="number" id="taxa-crescimento" name="taxa-crescimento" min="0" max="100" step="0.1" value="5">
											<div class="input-group-append">
												<span class="input-group-text">%</span>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
					</div>

					<!-- Botões -->
					<div class="buttons-container">
						<button type="button" class="primary" id="btn-simular">Simular</button>
						<button type="reset" class="secondary" id="btn-limpar">Limpar</button>
					</div>
				</div>
				<div class="results-panel">
					<h3>Resultados da Simulação</h3>
					<div id="resultados">
						<!-- Resultados da simulação serão exibidos aqui -->
					</div>
				</div>
			</div>
        
			<!-- Conteúdo da aba Configurações Setoriais -->
			<div id="configuracoes-setoriais" class="tab-content">
				<h2>Configurações Setoriais</h2>
				<div class="panel mb-4">
					<h3 class="panel-title">Parâmetros Gerais do Split Payment</h3>
					<p class="text-muted mb-3">Configure os valores base para o cálculo do split payment que serão aplicados a todos os setores, exceto quando houver configurações específicas.</p>

					<div class="grid" style="grid-template-columns: repeat(3, 1fr); gap: 20px;">
						<div class="form-group">
							<label for="aliquota-cbs">Alíquota CBS (%):</label>
							<div class="input-group">
								<input type="number" id="aliquota-cbs" name="aliquota-cbs" min="0" max="100" step="0.01" value="8.8">
								<div class="input-group-append">
									<span class="input-group-text">%</span>
								</div>
							</div>
							<small class="help-text">Contribuição sobre Bens e Serviços - Alíquota Federal</small>
						</div>
						<div class="form-group">
								<label for="aliquota-ibs">Alíquota IBS (%):</label>
								<div class="input-group">
									<input type="number" id="aliquota-ibs" name="aliquota-ibs" min="0" max="100" step="0.01" value="17.7">
									<div class="input-group-append">
										<span class="input-group-text">%</span>
									</div>
								</div>
								<small class="help-text">Imposto sobre Bens e Serviços - Alíquota Estadual/Municipal</small>
							</div>
							
							<div class="form-group">
								<label for="data-inicio">Data de Início:</label>
								<input type="month" id="data-inicio" name="data-inicio" value="2026-01" min="2026-01">
								<small class="help-text">Início da implementação do split payment</small>
							</div>
						</div>
						
						<h4 class="section-subtitle mt-4">Cronograma de Implementação</h4>
						<p class="text-muted mb-3">Defina o percentual de implementação do split payment ao longo dos anos de transição (2026-2033).</p>
						
						<div class="table-actions">
							<button type="button" class="btn btn-outline" id="btn-restaurar-cronograma">Restaurar Cronograma Padrão</button>
						</div>
						
						<div class="table-container">
							<table class="editable-table cronograma-table" id="cronograma-table">
								<thead>
									<tr>
										<th>Ano</th>
										<th>Percentual (%)</th>
										<th>Observações</th>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>2026</td>
										<td><input type="number" name="perc-2026" min="0" max="100" step="0.1" value="10.0"></td>
										<td><input type="text" name="obs-2026" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2027</td>
										<td><input type="number" name="perc-2027" min="0" max="100" step="0.1" value="25.0"></td>
										<td><input type="text" name="obs-2027" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2028</td>
										<td><input type="number" name="perc-2028" min="0" max="100" step="0.1" value="40.0"></td>
										<td><input type="text" name="obs-2028" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2029</td>
										<td><input type="number" name="perc-2029" min="0" max="100" step="0.1" value="55.0"></td>
										<td><input type="text" name="obs-2029" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2030</td>
										<td><input type="number" name="perc-2030" min="0" max="100" step="0.1" value="70.0"></td>
										<td><input type="text" name="obs-2030" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2031</td>
										<td><input type="number" name="perc-2031" min="0" max="100" step="0.1" value="85.0"></td>
										<td><input type="text" name="obs-2031" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2032</td>
										<td><input type="number" name="perc-2032" min="0" max="100" step="0.1" value="95.0"></td>
										<td><input type="text" name="obs-2032" placeholder="Observações..."></td>
									</tr>
									<tr>
										<td>2033</td>
										<td><input type="number" name="perc-2033" min="0" max="100" step="0.1" value="100.0"></td>
										<td><input type="text" name="obs-2033" placeholder="Observações..."></td>
									</tr>
								</tbody>
							</table>
						</div>
					</div>
					
						<div class="panel mb-4">
							<h3 class="panel-title">Configurações Específicas por Setor</h3>
							<p class="text-muted mb-3">Configure parâmetros específicos para setores que possuem tratamento diferenciado no regime do split payment.</p>
							
							<div class="table-actions">
								<button type="button" class="btn btn-primary" id="btn-adicionar-setor">Adicionar Setor</button>
							</div>
							
							<div class="table-container">
								<table class="editable-table sector-table" id="sector-table">
									<thead>
										<tr>
											<th>Setor</th>
											<th>Alíquota Específica (%)</th>
											<th>Redução Especial (%)</th>
											<th>Cronograma Próprio</th>
											<th class="actions-column">Ações</th>
										</tr>
									</thead>
									<tbody>
										<tr id="setor-1">
											<td><input type="text" name="setor-nome-1" value="Comércio Varejista"></td>
											<td><input type="number" name="setor-aliquota-1" min="0" max="100" step="0.01" value="26.5"></td>
											<td><input type="number" name="setor-reducao-1" min="0" max="100" step="0.01" value="0"></td>
											<td>
												<select name="setor-cronograma-1">
													<option value="padrao">Cronograma Padrão</option>
													<option value="proprio">Cronograma Específico</option>
												</select>
											</td>
											<td>
												<button type="button" class="btn btn-outline btn-sm" onclick="configurarCronogramaSetor(1)">Configurar</button>
												<button type="button" class="btn btn-accent btn-sm" onclick="removerSetor(1)">Remover</button>
											</td>
										</tr>
										<tr id="setor-2">
											<td><input type="text" name="setor-nome-2" value="Indústria"></td>
											<td><input type="number" name="setor-aliquota-2" min="0" max="100" step="0.01" value="26.5"></td>
											<td><input type="number" name="setor-reducao-2" min="0" max="100" step="0.01" value="0"></td>
											<td>
												<select name="setor-cronograma-2">
													<option value="padrao">Cronograma Padrão</option>
													<option value="proprio">Cronograma Específico</option>
												</select>
											</td>
											<td>
												<button type="button" class="btn btn-outline btn-sm" onclick="configurarCronogramaSetor(2)">Configurar</button>
												<button type="button" class="btn btn-accent btn-sm" onclick="removerSetor(2)">Remover</button>
											</td>
										</tr>
										<tr id="setor-3">
											<td><input type="text" name="setor-nome-3" value="Serviços"></td>
											<td><input type="number" name="setor-aliquota-3" min="0" max="100" step="0.01" value="26.5"></td>
											<td><input type="number" name="setor-reducao-3" min="0" max="100" step="0.01" value="0"></td>
											<td>
												<select name="setor-cronograma-3">
													<option value="padrao">Cronograma Padrão</option>
													<option value="proprio">Cronograma Específico</option>
												</select>
											</td>
											<td>
												<button type="button" class="btn btn-outline btn-sm" onclick="configurarCronogramaSetor(3)">Configurar</button>
												<button type="button" class="btn btn-accent btn-sm" onclick="removerSetor(3)">Remover</button>
											</td>
										</tr>
									</tbody>
								</table>
							</div>
						</div>
					
						<div class="panel mb-4">
							<h3 class="panel-title">Parâmetros Financeiros</h3>
							<p class="text-muted mb-3">Configure os parâmetros financeiros para cálculo do impacto do split payment no capital de giro e fluxo de caixa.</p>
							
							<div class="grid" style="grid-template-columns: repeat(3, 1fr); gap: 20px;">
								<div class="form-group">
									<label for="taxa-antecipacao">Taxa Média de Antecipação de Recebíveis:</label>
									<div class="input-group">
										<input type="number" id="taxa-antecipacao" name="taxa-antecipacao" min="0" max="100" step="0.01" value="1.8">
										<div class="input-group-append">
											<span class="input-group-text">% a.m.</span>
										</div>
									</div>
									<small class="help-text">Taxa média para antecipação de recebíveis ao mês</small>
								</div>
								
								<div class="form-group">
									<label for="taxa-capital-giro">Taxa Média de Capital de Giro:</label>
									<div class="input-group">
										<input type="number" id="taxa-capital-giro" name="taxa-capital-giro" min="0" max="100" step="0.01" value="2.1">
										<div class="input-group-append">
											<span class="input-group-text">% a.m.</span>
										</div>
									</div>
									<small class="help-text">Taxa média para linhas de capital de giro ao mês</small>
								</div>
								
								<div class="form-group">
									<label for="spread-bancario">Spread Bancário Médio:</label>
									<div class="input-group">
										<input type="number" id="spread-bancario" name="spread-bancario" min="0" max="100" step="0.01" value="3.5">
										<div class="input-group-append">
											<span class="input-group-text">p.p.</span>
										</div>
									</div>
									<small class="help-text">Spread bancário médio em pontos percentuais</small>
								</div>
							</div>
							
							<div class="form-group mt-3">
								<label for="observacoes-financeiras">Observações Adicionais:</label>
								<textarea id="observacoes-financeiras" name="observacoes-financeiras" rows="3" placeholder="Insira aqui observações adicionais sobre os parâmetros financeiros..."></textarea>
							</div>
						</div>
						
						<div class="form-actions">
							<button type="button" class="btn btn-primary" id="btn-salvar-configuracoes">Salvar Configurações</button>
							<button type="button" class="btn btn-secondary" id="btn-restaurar-padroes">Restaurar Padrões</button>
						</div>		
						<!-- Modal para Configuração de Cronograma Setorial -->
						<div class="modal-backdrop" id="modal-cronograma-setor">
							<div class="modal">
								<div class="modal-header">
									<h3 class="modal-title">Cronograma Específico para Setor</h3>
									<button type="button" class="modal-close" id="btn-fechar-modal">&times;</button>
								</div>
								<div class="modal-body">
									<div class="mb-3">
										<label for="modal-setor-nome" class="fw-bold">Setor:</label>
										<span id="modal-setor-nome"></span>
										<input type="hidden" id="modal-setor-id">
									</div>
									
									<div class="table-container">
										<table class="editable-table cronograma-table" id="cronograma-setor-table">
											<thead>
												<tr>
													<th>Ano</th>
													<th>Percentual (%)</th>
													<th>Observações</th>
												</tr>
											</thead>
											<tbody>
												<!-- Será preenchido dinamicamente por JavaScript -->
											</tbody>
										</table>
									</div>
								</div>
								<div class="modal-footer">
									<button type="button" class="btn btn-primary" id="btn-salvar-cronograma-setor">Salvar</button>
									<button type="button" class="btn btn-secondary" id="btn-cancelar-modal">Cancelar</button>
								</div>
							</div>
						</div>			
							<!-- Modal para Configuração de Cronograma Setorial -->
							<div class="modal-backdrop" id="modal-cronograma-setor">
								<!-- Conteúdo do modal... -->
							</div>
						</div>
					</div>
				</div>
			</div>
			<div id="estrategias-mitigacao" class="tab-content">
				<form id="estrategias-form">
					<!-- Seleção de Estratégias -->
					<div class="group-box">
						<h2>Seleção de Estratégias de Mitigação</h2>
						<p style="margin-bottom: 15px; color: var(--gray-text);">Selecione as estratégias que deseja simular para mitigar o impacto do Split Payment no fluxo de caixa da empresa.</p>
						
						<div class="checkbox-group">
							<div class="checkbox-item">
								<input type="checkbox" id="ajuste-precos" name="estrategias" value="ajuste-precos">
								<label for="ajuste-precos">Ajuste de preços</label>
							</div>
							<div class="checkbox-item">
								<input type="checkbox" id="renegociacao-prazos" name="estrategias" value="renegociacao-prazos">
								<label for="renegociacao-prazos">Renegociação de prazos</label>
							</div>
							<div class="checkbox-item">
								<input type="checkbox" id="antecipacao-recebiveis" name="estrategias" value="antecipacao-recebiveis">
								<label for="antecipacao-recebiveis">Antecipação de recebíveis</label>
							</div>
							<div class="checkbox-item">
								<input type="checkbox" id="capital-giro" name="estrategias" value="capital-giro">
								<label for="capital-giro">Captação de capital de giro</label>
							</div>
							<div class="checkbox-item">
								<input type="checkbox" id="mix-produtos" name="estrategias" value="mix-produtos">
								<label for="mix-produtos">Otimização do mix de produtos/serviços</label>
							</div>
							<div class="checkbox-item">
								<input type="checkbox" id="meios-pagamento" name="estrategias" value="meios-pagamento">
								<label for="meios-pagamento">Diversificação dos meios de pagamento</label>
							</div>
						</div>
					</div>
					<!-- Parâmetros de Ajuste de Preços -->
					<div id="params-ajuste-precos" class="strategy-params">
						<h3>Parâmetros de Ajuste de Preços</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="perc-aumento">Percentual de aumento (%):</label>
									<div class="input-group">
										<input type="number" id="perc-aumento" name="perc-aumento" min="0" max="100" step="0.1" value="5.0">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Aumento médio a ser aplicado nos preços dos produtos/serviços</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="elasticidade">Elasticidade-preço estimada:</label>
									<input type="number" id="elasticidade" name="elasticidade" min="-10" max="0" step="0.1" value="-1.2">
									<span class="help-text">Valor negativo que indica a sensibilidade da demanda às alterações de preço</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="impacto-vendas">Impacto estimado nas vendas (%):</label>
									<div class="input-group">
										<input type="number" id="impacto-vendas" name="impacto-vendas" readonly>
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Calculado automaticamente com base na elasticidade</span>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="estrategia-preco">Estratégia de repasse:</label>
									<select id="estrategia-preco" name="estrategia-preco">
										<option value="gradual">Repasse gradual</option>
										<option value="imediato">Repasse imediato</option>
										<option value="seletivo">Repasse seletivo por produto</option>
										<option value="segmentado">Repasse segmentado por cliente</option>
									</select>
									<span class="help-text">Método de implementação do ajuste de preços</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="periodo-ajuste">Período de ajuste:</label>
									<select id="periodo-ajuste" name="periodo-ajuste">
										<option value="1">1 mês</option>
										<option value="3" selected>3 meses</option>
										<option value="6">6 meses</option>
										<option value="12">12 meses</option>
									</select>
									<span class="help-text">Período para implementação completa do ajuste de preços</span>
								</div>
							</div>
						</div>
					</div>

					<!-- Parâmetros de Renegociação de Prazos -->
					<div id="params-renegociacao-prazos" class="strategy-params">
						<h3>Parâmetros de Renegociação de Prazos com Fornecedores</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="aumento-prazo">Aumento desejado no prazo (dias):</label>
									<div class="input-group">
										<input type="number" id="aumento-prazo" name="aumento-prazo" min="0" step="1" value="15">
										<div class="input-group-append">
											<span class="input-group-text">dias</span>
										</div>
									</div>
									<span class="help-text">Aumento médio desejado no prazo de pagamento a fornecedores</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="perc-fornecedores">Percentual do volume de compras afetado (%):</label>
									<div class="input-group">
										<input type="number" id="perc-fornecedores" name="perc-fornecedores" min="0" max="100" step="1" value="60">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Percentual do volume total de compras que pode ser renegociado</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="contrapartidas">Contrapartidas oferecidas:</label>
									<select id="contrapartidas" name="contrapartidas">
										<option value="nenhuma">Nenhuma contrapartida</option>
										<option value="volume">Aumento de volume de compras</option>
										<option value="exclusividade">Acordo de exclusividade</option>
										<option value="contrato">Contrato de longo prazo</option>
										<option value="preco">Revisão de preço (para mais)</option>
									</select>
									<span class="help-text">Contrapartida oferecida em troca do aumento no prazo</span>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="custo-contrapartida">Custo estimado da contrapartida (%):</label>
									<div class="input-group">
										<input type="number" id="custo-contrapartida" name="custo-contrapartida" min="0" max="100" step="0.1" value="0">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Custo estimado da contrapartida em relação ao valor negociado</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="prazo-implementacao">Prazo para implementação:</label>
									<select id="prazo-implementacao" name="prazo-implementacao">
										<option value="1">1 mês</option>
										<option value="2" selected>2 meses</option>
										<option value="3">3 meses</option>
										<option value="6">6 meses</option>
									</select>
									<span class="help-text">Tempo necessário para implementar as mudanças</span>
								</div>
							</div>
						</div>
					</div>

					<!-- Parâmetros de Antecipação de Recebíveis -->
					<div id="params-antecipacao-recebiveis" class="strategy-params">
						<h3>Parâmetros para Antecipação de Recebíveis</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="perc-antecipacao">Percentual das vendas a prazo a antecipar (%):</label>
									<div class="input-group">
										<input type="number" id="perc-antecipacao" name="perc-antecipacao" min="0" max="100" step="1" value="50">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Percentual das vendas a prazo que será antecipado</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="taxa-desconto">Taxa de desconto (% a.m.):</label>
									<div class="input-group">
										<input type="number" id="taxa-desconto" name="taxa-desconto" min="0" max="100" step="0.1" value="1.8">
										<div class="input-group-append">
											<span class="input-group-text">% a.m.</span>
										</div>
									</div>
									<span class="help-text">Taxa mensal cobrada pela instituição financeira para antecipar os recebíveis</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="prazo-antecipacao">Prazo médio de antecipação (dias):</label>
									<div class="input-group">
										<input type="number" id="prazo-antecipacao" name="prazo-antecipacao" min="0" step="1" value="25">
										<div class="input-group-append">
											<span class="input-group-text">dias</span>
										</div>
									</div>
									<span class="help-text">Número médio de dias que serão antecipados</span>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="custo-efetivo">Custo efetivo da antecipação (%):</label>
									<div class="input-group">
										<input type="number" id="custo-efetivo" name="custo-efetivo" readonly>
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Calculado automaticamente com base no prazo e na taxa</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="modalidade-antecipacao">Modalidade de antecipação:</label>
									<select id="modalidade-antecipacao" name="modalidade-antecipacao">
										<option value="duplicatas">Duplicatas e títulos</option>
										<option value="cartao">Recebíveis de cartão</option>
										<option value="ambos" selected>Ambos</option>
									</select>
									<span class="help-text">Tipo de recebível a ser antecipado</span>
								</div>
							</div>
						</div>
					</div>

					<!-- Parâmetros de Captação de Capital de Giro -->
					<div id="params-capital-giro" class="strategy-params">
						<h3>Parâmetros para Captação de Capital de Giro</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="valor-captacao">Valor a captar (% do faturamento mensal):</label>
									<div class="input-group">
										<input type="number" id="valor-captacao" name="valor-captacao" min="0" max="1000" step="1" value="100">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Valor a captar como percentual do faturamento mensal médio</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="taxa-juros">Taxa de juros (% a.m.):</label>
									<div class="input-group">
										<input type="number" id="taxa-juros" name="taxa-juros" min="0" max="100" step="0.1" value="2.1">
										<div class="input-group-append">
											<span class="input-group-text">% a.m.</span>
										</div>
									</div>
									<span class="help-text">Taxa mensal de juros para a linha de capital de giro</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="prazo-pagamento">Prazo para pagamento:</label>
									<select id="prazo-pagamento" name="prazo-pagamento">
										<option value="6">6 meses</option>
										<option value="12" selected>12 meses</option>
										<option value="18">18 meses</option>
										<option value="24">24 meses</option>
										<option value="36">36 meses</option>
									</select>
									<span class="help-text">Prazo total para pagamento do empréstimo</span>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="carencia">Período de carência:</label>
									<select id="carencia" name="carencia">
										<option value="0">Sem carência</option>
										<option value="1">1 mês</option>
										<option value="2">2 meses</option>
										<option value="3" selected>3 meses</option>
										<option value="6">6 meses</option>
									</select>
									<span class="help-text">Período de carência para início do pagamento das parcelas</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="modalidade-amortizacao">Modalidade de amortização:</label>
									<select id="modalidade-amortizacao" name="modalidade-amortizacao">
										<option value="sac">SAC (amortização constante)</option>
										<option value="price" selected>PRICE (parcelas iguais)</option>
									</select>
									<span class="help-text">Sistema de amortização do empréstimo</span>
								</div>
							</div>
						</div>
					</div>

					<!-- Parâmetros de Otimização do Mix de Produtos/Serviços -->
					<div id="params-mix-produtos" class="strategy-params">
						<h3>Parâmetros para Otimização do Mix de Produtos/Serviços</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="perc-ajuste-mix">Percentual do portfólio a ajustar (%):</label>
									<div class="input-group">
										<input type="number" id="perc-ajuste-mix" name="perc-ajuste-mix" min="0" max="100" step="1" value="30">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Percentual do portfólio de produtos/serviços que será ajustado</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="foco-ajuste">Foco do ajuste:</label>
									<select id="foco-ajuste" name="foco-ajuste">
										<option value="margem">Produtos de maior margem</option>
										<option value="giro">Produtos de maior giro</option>
										<option value="ciclo" selected>Produtos com ciclo financeiro menor</option>
										<option value="balanceado">Balanceamento de portfólio</option>
									</select>
									<span class="help-text">Estratégia principal para ajuste do mix</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="impacto-receita">Impacto estimado na receita (%):</label>
									<div class="input-group">
										<input type="number" id="impacto-receita" name="impacto-receita" min="-100" max="100" step="0.1" value="-5">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Impacto estimado na receita total após a otimização</span>
								</div>
							</div>
						</div>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="impacto-margem">Impacto estimado na margem média (p.p.):</label>
									<div class="input-group">
										<input type="number" id="impacto-margem" name="impacto-margem" min="-100" max="100" step="0.1" value="3.5">
										<div class="input-group-append">
											<span class="input-group-text">p.p.</span>
										</div>
									</div>
									<span class="help-text">Variação da margem média em pontos percentuais</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="prazo-otimizacao">Prazo para implementação completa:</label>
									<select id="prazo-otimizacao" name="prazo-otimizacao">
										<option value="1">1 mês</option>
										<option value="3">3 meses</option>
										<option value="6" selected>6 meses</option>
										<option value="12">12 meses</option>
									</select>
									<span class="help-text">Tempo necessário para implementar a otimização do mix</span>
								</div>
							</div>
						</div>
					</div>		
					<!-- Parâmetros de Diversificação de Meios de Pagamento -->
					<div id="params-meios-pagamento" class="strategy-params">
						<h3>Parâmetros para Diversificação dos Meios de Pagamento</h3>
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="dist-atual-vista">Distribuição atual - À vista (%):</label>
									<div class="input-group">
										<input type="number" id="dist-atual-vista" name="dist-atual-vista" min="0" max="100" step="1" value="30">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="dist-atual-prazo">Distribuição atual - A prazo (%):</label>
									<div class="input-group">
										<input type="number" id="dist-atual-prazo" name="dist-atual-prazo" min="0" max="100" step="1" value="70" readonly>
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					
						<div class="form-group" style="margin-top: 15px;">
							<label><strong>Distribuição Desejada</strong></label>
						</div>
						
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="dist-nova-vista">À vista (%):</label>
									<div class="input-group">
										<input type="number" id="dist-nova-vista" name="dist-nova-vista" min="0" max="100" step="1" value="40">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="dist-nova-30dias">30 dias (%):</label>
									<div class="input-group">
										<input type="number" id="dist-nova-30dias" name="dist-nova-30dias" min="0" max="100" step="1" value="30">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="dist-nova-60dias">60 dias (%):</label>
									<div class="input-group">
										<input type="number" id="dist-nova-60dias" name="dist-nova-60dias" min="0" max="100" step="1" value="20">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="dist-nova-90dias">90 dias (%):</label>
									<div class="input-group">
										<input type="number" id="dist-nova-90dias" name="dist-nova-90dias" min="0" max="100" step="1" value="10">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
								</div>
							</div>
						</div>
						
						<div class="form-row">
							<div class="form-column">
								<div class="form-group">
									<label for="dist-nova-total">Total (%):</label>
									<div class="input-group">
										<input type="number" id="dist-nova-total" name="dist-nova-total" min="0" max="100" step="1" value="100" readonly>
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Soma deve ser igual a 100%</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="taxa-incentivo">Taxa de incentivo para à vista (%):</label>
									<div class="input-group">
										<input type="number" id="taxa-incentivo" name="taxa-incentivo" min="0" max="100" step="0.1" value="3">
										<div class="input-group-append">
											<span class="input-group-text">%</span>
										</div>
									</div>
									<span class="help-text">Desconto oferecido para pagamentos à vista</span>
								</div>
							</div>
							<div class="form-column">
								<div class="form-group">
									<label for="prazo-implementacao-meios">Prazo para implementação:</label>
									<select id="prazo-implementacao-meios" name="prazo-implementacao-meios">
										<option value="1">1 mês</option>
										<option value="2" selected>2 meses</option>
										<option value="3">3 meses</option>
										<option value="6">6 meses</option>
									</select>
									<span class="help-text">Tempo necessário para implementar a nova distribuição</span>
								</div>
							</div>
						</div>
							
						<!-- Botões de Ação -->
						<div class="buttons-container">
							<button type="button" class="primary" id="btn-simular">Simular Estratégias</button>
							<button type="button" class="secondary" id="btn-comparar">Comparar Eficácia</button>
							<button type="reset" class="outline" id="btn-limpar">Limpar Formulário</button>
						</div>

						<!-- Área de Resultados (inicialmente oculta) -->
						<div id="resultados-estrategias" style="margin-top: 30px; display: none;">
							<div class="group-box">
								<h3>Resultados da Simulação</h3>
								<p id="resultado-descricao" style="margin-bottom: 15px;">Resultados da simulação das estratégias selecionadas.</p>
								
								<!-- Área para exibição de gráficos e tabelas -->
								<div class="subtab-container">
									<div class="subtab-buttons">
										<button class="subtab-button active" data-subtab="resumo">Resumo</button>
										<button class="subtab-button" data-subtab="fluxo-caixa">Fluxo de Caixa</button>
										<button class="subtab-button" data-subtab="comparativo">Comparativo</button>
										<button class="subtab-button" data-subtab="detalhamento">Detalhamento</button>
									</div>
									
									<div id="resumo" class="subtab-content active">
										<h4 style="margin-bottom: 15px;">Resumo do Impacto das Estratégias</h4>
										<div id="grafico-resumo" style="height: 300px; background-color: #f9f9f9; border: 1px dashed #ccc; display: flex; justify-content: center; align-items: center;">
											[Gráfico de Resumo das Estratégias]
										</div>
										<div style="margin-top: 20px;">
											<table style="width: 100%; border-collapse: collapse;">
												<thead>
													<tr style="background-color: #f5f5f5;">
														<th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Estratégia</th>
														<th style="padding: 10px; text-align: right; border: 1px solid #ddd;">Impacto no Caixa</th>
														<th style="padding: 10px; text-align: right; border: 1px solid #ddd;">Custo de Implementação</th>
														<th style="padding: 10px; text-align: right; border: 1px solid #ddd;">ROI</th>
														<th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Viabilidade</th>
													</tr>
												</thead>
												<tbody id="tabela-resumo-corpo">
													<!-- Será preenchido via JavaScript -->
												</tbody>
											</table>
										</div>
									</div>
									
									<div id="fluxo-caixa" class="subtab-content">
										<h4 style="margin-bottom: 15px;">Projeção de Fluxo de Caixa</h4>
										<div id="grafico-fluxo" style="height: 300px; background-color: #f9f9f9; border: 1px dashed #ccc; display: flex; justify-content: center; align-items: center;">
											[Gráfico de Fluxo de Caixa Projetado]
										</div>
									</div>
									
									<div id="comparativo" class="subtab-content">
										<h4 style="margin-bottom: 15px;">Comparativo de Eficácia das Estratégias</h4>
										<div id="grafico-comparativo" style="height: 300px; background-color: #f9f9f9; border: 1px dashed #ccc; display: flex; justify-content: center; align-items: center;">
											[Gráfico Comparativo de Estratégias]
										</div>
									</div>
									
									<div id="detalhamento" class="subtab-content">
										<h4 style="margin-bottom: 15px;">Detalhamento das Estratégias</h4>
										<div id="conteudo-detalhamento">
											<!-- Será preenchido via JavaScript -->
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</form>
			</div>
			<!-- Conteúdo da aba Memória de Cálculo -->
			<div id="memoria-calculo" class="tab-content">
				<div class="group-box">
					<h2 class="section-title">Memória de Cálculo</h2>
					<p class="section-subtitle">Visualize e analise todos os cálculos realizados pelo simulador para cada cenário.</p>
					<!-- Memória de cálculo detalhada será exibida aqui -->
					<div class="memory-status" id="memory-status">
						Carregando memória de cálculo...
					</div>				
					<div class="memory-controls">
						<div class="control-group">
							<label for="cenario-select">Cenário:</label>
							<select id="cenario-select" class="form-control">
								<option value="cenario-padrao">Cenário Padrão (Atual)</option>
								<option value="cenario-otimista">Cenário Otimista</option>
								<option value="cenario-pessimista">Cenário Pessimista</option>
								<option value="cenario-personalizado">Cenário Personalizado</option>
							</select>
						</div>
						
						<div class="control-group">
							<label for="periodo-select">Período:</label>
							<select id="periodo-select" class="form-control">
								<option value="todos">Todos os períodos</option>
								<option value="2026">2026</option>
								<option value="2027">2027</option>
								<option value="2028">2028</option>
								<option value="2029">2029</option>
								<option value="2030">2030</option>
								<option value="2031">2031</option>
								<option value="2032">2032</option>
								<option value="2033">2033</option>
							</select>
						</div>					
						<div class="control-group">
							<label>Filtros:</label>
							<div class="checkbox-group">
								<div class="checkbox-item">
									<input type="checkbox" id="filtro-fluxo-atual" checked>
									<label for="filtro-fluxo-atual">Fluxo de Caixa Atual</label>
								</div>
								<div class="checkbox-item">
									<input type="checkbox" id="filtro-fluxo-split" checked>
									<label for="filtro-fluxo-split">Fluxo de Caixa com Split</label>
								</div>
								<div class="checkbox-item">
									<input type="checkbox" id="filtro-impacto" checked>
									<label for="filtro-impacto">Impacto no Capital de Giro</label>
								</div>
								<div class="checkbox-item">
									<input type="checkbox" id="filtro-estrategias" checked>
									<label for="filtro-estrategias">Estratégias de Mitigação</label>
								</div>
							</div>
						</div>					
						<div class="memory-toolbar">
							<div class="toolbar-group">
								<button type="button" class="btn btn-primary" id="btn-exportar-txt">
									<i class="icon-download"></i> Exportar TXT
								</button>
								<button type="button" class="btn btn-primary" id="btn-exportar-pdf">
									<i class="icon-pdf"></i> Exportar PDF
								</button>
								<button type="button" class="btn btn-outline" id="btn-copiar">
									<i class="icon-copy"></i> Copiar
								</button>
							</div>						
							<div class="toolbar-group">
								<span class="line-count" id="line-count">Linhas: 0</span>
								<div class="search-bar">
									<input type="text" id="search-memory" placeholder="Pesquisar...">
									<button type="button" class="btn btn-outline btn-sm" id="btn-search">Buscar</button>
								</div>
								<label>
									<input type="checkbox" id="mostrar-linhas"> Mostrar números de linha
								</label>
							</div>
						</div> <!-- Fechamento correto do memory-toolbar -->
						
						<div class="memory-container" id="memory-container">
							<div class="line-numbers" id="line-numbers" style="display:none;"></div>
							<div class="memory-content" id="memory-content">
								<!-- O conteúdo da memória de cálculo será inserido aqui dinamicamente via JavaScript -->
								<div class="calculation-section">
									<div class="calculation-section-title">== PARÂMETROS DE ENTRADA ==</div>
									<div class="calculation-line input">Faturamento: R$ 1.000.000,00</div>
									<div class="calculation-line input">Período: Mensal</div>
									<div class="calculation-line input">Setor: Comércio Varejista</div>
									<div class="calculation-line input">Regime Tributário: Lucro Presumido</div>
									<div class="calculation-line input">Margem Operacional: 25%</div>
									<div class="calculation-line input">Prazo Médio de Recebimento (PMR): 30 dias</div>
									<div class="calculation-line input">Prazo Médio de Pagamento (PMP): 40 dias</div>
									<div class="calculation-line input">Prazo Médio de Estoque (PME): 45 dias</div>
									<div class="calculation-line input">Vendas à Vista: 30%</div>
									<div class="calculation-line input">Vendas a Prazo: 70%</div>
									<div class="calculation-line input">Alíquota Efetiva de Tributos: 26,5%</div>
								</div>
								
								<div class="calculation-section">
									<div class="calculation-section-title">== CÁLCULO DO CICLO FINANCEIRO ATUAL ==</div>
									<div class="calculation-line comment"># Ciclo Financeiro = PMR + PME - PMP</div>
									<div class="calculation-line formula">Ciclo Financeiro = 30 + 45 - 40</div>
									<div class="calculation-line result">Ciclo Financeiro = 35 dias</div>
								</div>
								
								<div class="calculation-section">
									<div class="calculation-section-title">== CÁLCULO DO FLUXO DE CAIXA ATUAL ==</div>
									<div class="calculation-line comment"># Cálculo das vendas mensais por modalidade</div>
									<div class="calculation-line formula">Vendas à Vista = Faturamento * % Vendas à Vista</div>
									<div class="calculation-line formula">Vendas à Vista = R$ 1.000.000,00 * 30%</div>
									<div class="calculation-line result">Vendas à Vista = R$ 300.000,00</div>
									<div class="calculation-line formula">Vendas a Prazo = Faturamento * % Vendas a Prazo</div>
									<div class="calculation-line formula">Vendas a Prazo = R$ 1.000.000,00 * 70%</div>
									<div class="calculation-line result">Vendas a Prazo = R$ 700.000,00</div>
									
									<div class="calculation-line comment"># Cálculo dos impostos</div>
									<div class="calculation-line formula">Impostos = Faturamento * Alíquota Efetiva</div>
									<div class="calculation-line formula">Impostos = R$ 1.000.000,00 * 26,5%</div>
									<div class="calculation-line result">Impostos = R$ 265.000,00</div>
									
									<div class="calculation-line comment"># Cálculo do prazo de pagamento do imposto atual</div>
									<div class="calculation-line variable">Prazo de Pagamento do Imposto = 25 dias (após o mês)</div>
									<div class="calculation-line formula">Prazo Efetivo = 30 + 25 = 55 dias</div>
								</div>
								
								<div class="calculation-section">
									<div class="calculation-section-title">== CÁLCULO DO FLUXO DE CAIXA COM SPLIT PAYMENT ==</div>
									<div class="calculation-line comment"># Parâmetros do Split Payment para 2026</div>
									<div class="calculation-line variable">Percentual de Implementação (2026) = 10%</div>
									<div class="calculation-line variable">Alíquota CBS = 8,8%</div>
									<div class="calculation-line variable">Alíquota IBS = 17,7%</div>
									
									<div class="calculation-line comment"># Cálculo dos impostos em Split Payment</div>
									<div class="calculation-line formula">Impostos Split = Impostos * Percentual de Implementação</div>
									<div class="calculation-line formula">Impostos Split = R$ 265.000,00 * 10%</div>
									<div class="calculation-line result">Impostos Split = R$ 26.500,00</div>
									
									<div class="calculation-line formula">Impostos Convencionais = Impostos - Impostos Split</div>
									<div class="calculation-line formula">Impostos Convencionais = R$ 265.000,00 - R$ 26.500,00</div>
									<div class="calculation-line result">Impostos Convencionais = R$ 238.500,00</div>
									
									<div class="calculation-line comment"># Cálculo do impacto no fluxo de vendas a prazo</div>
									<div class="calculation-line formula">Impostos Split nas Vendas a Prazo = Vendas a Prazo * Alíquota Efetiva * % Implementação</div>
									<div class="calculation-line formula">Impostos Split nas Vendas a Prazo = R$ 700.000,00 * 26,5% * 10%</div>
									<div class="calculation-line result">Impostos Split nas Vendas a Prazo = R$ 18.550,00</div>
								</div>
								
								<div class="calculation-section">
									<div class="calculation-section-title">== IMPACTO NO CAPITAL DE GIRO ==</div>
									<div class="calculation-line comment"># Cálculo do Capital de Giro Comprometido no modelo atual</div>
									<div class="calculation-line formula">Capital de Giro Atual = (Vendas a Prazo / 30) * PMR - (Impostos / 30) * (Prazo Efetivo)</div>
									<div class="calculation-line formula">Capital de Giro Atual = (R$ 700.000,00 / 30) * 30 - (R$ 265.000,00 / 30) * 55</div>
									<div class="calculation-line formula">Capital de Giro Atual = R$ 700.000,00 - R$ 485.833,33</div>
									<div class="calculation-line result">Capital de Giro Atual = R$ 214.166,67</div>
									
									<div class="calculation-line comment"># Cálculo do Capital de Giro Comprometido com Split Payment</div>
									<div class="calculation-line formula">Capital de Giro Split = (Vendas a Prazo / 30) * PMR - (Impostos Convencionais / 30) * (Prazo Efetivo) - Impostos Split nas Vendas a Prazo</div>
									<div class="calculation-line formula">Capital de Giro Split = (R$ 700.000,00 / 30) * 30 - (R$ 238.500,00 / 30) * 55 - R$ 18.550,00</div>
									<div class="calculation-line formula">Capital de Giro Split = R$ 700.000,00 - R$ 437.250,00 - R$ 18.550,00</div>
									<div class="calculation-line result">Capital de Giro Split = R$ 244.200,00</div>
									
									<div class="calculation-line comment"># Cálculo do Impacto no Capital de Giro</div>
									<div class="calculation-line formula">Impacto = Capital de Giro Atual - Capital de Giro Split</div>
									<div class="calculation-line formula">Impacto = R$ 214.166,67 - R$ 244.200,00</div>
									<div class="calculation-line result">Impacto = -R$ 30.033,33 (Redução no Capital de Giro)</div>
								</div>
								
								<div class="calculation-section">
									<div class="calculation-section-title">== ESTRATÉGIAS DE MITIGAÇÃO ==</div>
									<div class="calculation-line comment"># Análise de Estratégia: Antecipação de Recebíveis</div>
									<div class="calculation-line variable">Taxa de Desconto = 1,8% a.m.</div>
									<div class="calculation-line variable">Percentual a Antecipar = 50% das vendas a prazo</div>
									<div class="calculation-line formula">Valor a Antecipar = Vendas a Prazo * Percentual a Antecipar</div>
									<div class="calculation-line formula">Valor a Antecipar = R$ 700.000,00 * 50%</div>
									<div class="calculation-line result">Valor a Antecipar = R$ 350.000,00</div>
									
									<div class="calculation-line formula">Custo da Antecipação = Valor a Antecipar * Taxa de Desconto * (PMR / 30)</div>
									<div class="calculation-line formula">Custo da Antecipação = R$ 350.000,00 * 1,8% * (30 / 30)</div>
									<div class="calculation-line result">Custo da Antecipação = R$ 6.300,00</div>
									
									<div class="calculation-line formula">Benefício Líquido = Valor a Antecipar - Custo da Antecipação - Impacto</div>
									<div class="calculation-line formula">Benefício Líquido = R$ 350.000,00 - R$ 6.300,00 - R$ 30.033,33</div>
									<div class="calculation-line result">Benefício Líquido = R$ 313.666,67</div>
								</div>
							</div>
						</div>
					</div> <!-- Fechamento correto do memory-controls -->
				</div> <!-- Fechamento correto do memoria-calculo -->
			</div>
			<div id="ajuda-documentacao" class="tab-content">
			  <div class="group-box">
				  <h2>Ajuda e Documentação</h2>		
					<div class="search-container">
						<input type="text" class="search-input" placeholder="Busque por tópicos, termos ou dúvidas...">
					</div>		
					<div class="help-container">
						<!-- Menu Lateral -->
						<div class="help-sidebar">
							<div class="help-nav-title">Índice</div>
							<ul class="help-nav">
								<li class="help-nav-item">
									<a href="#o-que-e-split-payment" class="help-nav-link active" data-target="o-que-e-split-payment">O que é Split Payment</a>
								</li>
								<li class="help-nav-item">
									<a href="#impactos-fluxo-caixa" class="help-nav-link" data-target="impactos-fluxo-caixa">Impactos no Fluxo de Caixa</a>
								</li>
								<li class="help-nav-item">
									<a href="#como-usar-simulador" class="help-nav-link" data-target="como-usar-simulador">Como usar o Simulador</a>
									<ul class="help-nav">
										<li class="help-nav-subitem">
											<a href="#simulacao-principal" class="help-nav-link" data-target="simulacao-principal">Simulação Principal</a>
										</li>
										<li class="help-nav-subitem">
											<a href="#configuracoes-setoriais" class="help-nav-link" data-target="configuracoes-setoriais">Configurações Setoriais</a>
										</li>
										<li class="help-nav-subitem">
											<a href="#estrategias-mitigacao" class="help-nav-link" data-target="estrategias-mitigacao">Estratégias de Mitigação</a>
										</li>
										<li class="help-nav-subitem">
											<a href="#memoria-calculo" class="help-nav-link" data-target="memoria-calculo">Memória de Cálculo</a>
										</li>
									</ul>
								</li>
								<li class="help-nav-item">
									<a href="#interpretando-resultados" class="help-nav-link" data-target="interpretando-resultados">Interpretando os Resultados</a>
								</li>
								<li class="help-nav-item">
									<a href="#estrategias-mitigacao-info" class="help-nav-link" data-target="estrategias-mitigacao-info">Estratégias de Mitigação</a>
								</li>
								<li class="help-nav-item">
									<a href="#glossario" class="help-nav-link" data-target="glossario">Glossário de Termos</a>
								</li>
								<li class="help-nav-item">
									<a href="#faq" class="help-nav-link" data-target="faq">FAQ (Perguntas Frequentes)</a>
								</li>
								<li class="help-nav-item">
									<a href="#exemplos-praticos" class="help-nav-link" data-target="exemplos-praticos">Exemplos Práticos</a>
								</li>
								<li class="help-nav-item">
									<a href="#download-recursos" class="help-nav-link" data-target="download-recursos">Download de Recursos</a>
								</li>
							</ul>
						</div>
						
						<!-- Conteúdo Principal -->
						<div class="help-content">
							<!-- Seção: O que é Split Payment -->
							<div id="o-que-e-split-payment" class="help-section active">
								<h2 class="help-section-title">O que é Split Payment</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Conceito e Funcionamento</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o conceito de Split Payment será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Base Legal</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a base legal do Split Payment será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Cronograma de Implementação</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o cronograma de implementação será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-card">
									<div class="help-card-title">Importante</div>
									<p>[Informação importante sobre o Split Payment será inserida aqui]</p>
								</div>
								
								<div class="help-navigation">
									<span></span>
									<a href="#impactos-fluxo-caixa" class="help-nav-next" data-target="impactos-fluxo-caixa">Impactos no Fluxo de Caixa</a>
								</div>
							</div>
							
							<!-- Seção: Impactos no Fluxo de Caixa -->
							<div id="impactos-fluxo-caixa" class="help-section">
								<h2 class="help-section-title">Impactos no Fluxo de Caixa</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Principais Alterações no Ciclo Financeiro</h3>
									<div class="help-text">
										<p>[Conteúdo sobre as alterações no ciclo financeiro será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Análise Setorial</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a análise setorial será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Impacto no Capital de Giro</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o impacto no capital de giro será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#o-que-e-split-payment" class="help-nav-prev" data-target="o-que-e-split-payment">O que é Split Payment</a>
									<a href="#como-usar-simulador" class="help-nav-next" data-target="como-usar-simulador">Como usar o Simulador</a>
								</div>
							</div>
							
							<!-- Seção: Como usar o Simulador -->
							<div id="como-usar-simulador" class="help-section">
								<h2 class="help-section-title">Como usar o Simulador</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Visão Geral da Interface</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a visão geral da interface será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Preenchimento dos Formulários</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o preenchimento dos formulários será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Navegação entre Abas</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a navegação entre abas será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#impactos-fluxo-caixa" class="help-nav-prev" data-target="impactos-fluxo-caixa">Impactos no Fluxo de Caixa</a>
									<a href="#interpretando-resultados" class="help-nav-next" data-target="interpretando-resultados">Interpretando os Resultados</a>
								</div>
							</div>
							
							<!-- Subseção: Simulação Principal -->
							<div id="simulacao-principal" class="help-section">
								<h2 class="help-section-title">Simulação Principal</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Parâmetros de Entrada</h3>
									<div class="help-text">
										<p>[Conteúdo sobre os parâmetros de entrada será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Executando a Simulação</h3>
									<div class="help-text">
										<p>[Conteúdo sobre como executar a simulação será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#como-usar-simulador" class="help-nav-prev" data-target="como-usar-simulador">Como usar o Simulador</a>
									<a href="#configuracoes-setoriais" class="help-nav-next" data-target="configuracoes-setoriais">Configurações Setoriais</a>
								</div>
							</div>
							
							<!-- Subseção: Configurações Setoriais -->
							<div id="configuracoes-setoriais" class="help-section">
								<h2 class="help-section-title">Configurações Setoriais</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Configurações por Setor</h3>
									<div class="help-text">
										<p>[Conteúdo sobre as configurações por setor será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Cronograma de Implementação</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o cronograma de implementação será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#simulacao-principal" class="help-nav-prev" data-target="simulacao-principal">Simulação Principal</a>
									<a href="#estrategias-mitigacao" class="help-nav-next" data-target="estrategias-mitigacao">Estratégias de Mitigação</a>
								</div>
							</div>
							
							<!-- Subseção: Estratégias de Mitigação (aba) -->
							<div id="estrategias-mitigacao" class="help-section">
								<h2 class="help-section-title">Estratégias de Mitigação (aba)</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Seleção de Estratégias</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a seleção de estratégias será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Configuração de Parâmetros</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a configuração de parâmetros será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#configuracoes-setoriais" class="help-nav-prev" data-target="configuracoes-setoriais">Configurações Setoriais</a>
									<a href="#memoria-calculo" class="help-nav-next" data-target="memoria-calculo">Memória de Cálculo</a>
								</div>
							</div>
							
							<!-- Subseção: Memória de Cálculo -->
							<div id="memoria-calculo" class="help-section">
								<h2 class="help-section-title">Memória de Cálculo</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Visualização dos Cálculos</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a visualização dos cálculos será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Exportação e Compartilhamento</h3>
									<div class="help-text">
										<p>[Conteúdo sobre exportação e compartilhamento será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#estrategias-mitigacao" class="help-nav-prev" data-target="estrategias-mitigacao">Estratégias de Mitigação (aba)</a>
									<a href="#interpretando-resultados" class="help-nav-next" data-target="interpretando-resultados">Interpretando os Resultados</a>
								</div>
							</div>
							
							<!-- Seção: Interpretando os Resultados -->
							<div id="interpretando-resultados" class="help-section">
								<h2 class="help-section-title">Interpretando os Resultados</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Análise dos Gráficos</h3>
									<div class="help-text">
										<p>[Conteúdo sobre a análise dos gráficos será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Entendendo os Indicadores</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o entendimento dos indicadores será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Comparativo de Cenários</h3>
									<div class="help-text">
										<p>[Conteúdo sobre o comparativo de cenários será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#como-usar-simulador" class="help-nav-prev" data-target="como-usar-simulador">Como usar o Simulador</a>
									<a href="#estrategias-mitigacao-info" class="help-nav-next" data-target="estrategias-mitigacao-info">Estratégias de Mitigação</a>
								</div>
							</div>
							
							<!-- Seção: Estratégias de Mitigação (informações) -->
							<div id="estrategias-mitigacao-info" class="help-section">
								<h2 class="help-section-title">Estratégias de Mitigação</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Ajustes de Preços</h3>
									<div class="help-text">
										<p>[Conteúdo sobre ajustes de preços será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Renegociação de Prazos</h3>
									<div class="help-text">
										<p>[Conteúdo sobre renegociação de prazos será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Antecipação de Recebíveis</h3>
									<div class="help-text">
										<p>[Conteúdo sobre antecipação de recebíveis será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Capital de Giro</h3>
									<div class="help-text">
										<p>[Conteúdo sobre capital de giro será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Otimização do Mix de Produtos/Serviços</h3>
									<div class="help-text">
										<p>[Conteúdo sobre otimização do mix de produtos/serviços será inserido aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#interpretando-resultados" class="help-nav-prev" data-target="interpretando-resultados">Interpretando os Resultados</a>
									<a href="#glossario" class="help-nav-next" data-target="glossario">Glossário de Termos</a>
								</div>
							</div>
							
							<!-- Seção: Glossário de Termos -->
							<div id="glossario" class="help-section">
								<h2 class="help-section-title">Glossário de Termos</h2>
								
								<div class="help-subsection">
									<div class="glossary-term">
										<div class="glossary-term-title">Split Payment</div>
										<div class="glossary-term-definition">[Definição do termo Split Payment será inserida aqui]</div>
									</div>
									
									<div class="glossary-term">
										<div class="glossary-term-title">IBS (Imposto sobre Bens e Serviços)</div>
										<div class="glossary-term-definition">[Definição do termo IBS será inserida aqui]</div>
									</div>
									
									<div class="glossary-term">
										<div class="glossary-term-title">CBS (Contribuição sobre Bens e Serviços)</div>
										<div class="glossary-term-definition">[Definição do termo CBS será inserida aqui]</div>
									</div>
									
									<div class="glossary-term">
										<div class="glossary-term-title">Ciclo Financeiro</div>
										<div class="glossary-term-definition">[Definição do termo Ciclo Financeiro será inserida aqui]</div>
									</div>
									
									<div class="glossary-term">
										<div class="glossary-term-title">PMR (Prazo Médio de Recebimento)</div>
										<div class="glossary-term-definition">[Definição do termo PMR será inserida aqui]</div>
									</div>
									
									<div class="glossary-term">
										<div class="glossary-term-title">PMP (Prazo Médio de Pagamento)</div>
										<div class="glossary-term-definition">[Definição do termo PMP será inserida aqui]</div>
									</div>
									
									<div class="glossary-term">
										<div class="glossary-term-title">Capital de Giro</div>
										<div class="glossary-term-definition">[Definição do termo Capital de Giro será inserida aqui]</div>
									</div>
									
									<!-- Outros termos serão adicionados aqui -->
								</div>
								
								<div class="help-navigation">
									<a href="#estrategias-mitigacao-info" class="help-nav-prev" data-target="estrategias-mitigacao-info">Estratégias de Mitigação</a>
									<a href="#faq" class="help-nav-next" data-target="faq">FAQ (Perguntas Frequentes)</a>
								</div>
							</div>
							
							<!-- Seção: FAQ (Perguntas Frequentes) -->
							<div id="faq" class="help-section">
								<h2 class="help-section-title">FAQ (Perguntas Frequentes)</h2>
								
								<div class="help-subsection">
									<div class="faq-item">
										<div class="faq-question" onclick="toggleFAQ(this)">Qual é o impacto do Split Payment no meu negócio?</div>
										<div class="faq-answer">
											<p>[Resposta à pergunta será inserida aqui]</p>
										</div>
									</div>
									
									<div class="faq-item">
										<div class="faq-question" onclick="toggleFAQ(this)">Quando começa a vigorar o Split Payment?</div>
										<div class="faq-answer">
											<p>[Resposta à pergunta será inserida aqui]</p>
										</div>
									</div>
									
									<div class="faq-item">
										<div class="faq-question" onclick="toggleFAQ(this)">Como posso mitigar os efeitos do Split Payment?</div>
										<div class="faq-answer">
											<p>[Resposta à pergunta será inserida aqui]</p>
										</div>
									</div>
									
									<div class="faq-item">
										<div class="faq-question" onclick="toggleFAQ(this)">O Split Payment afeta todos os setores da mesma forma?</div>
										<div class="faq-answer">
											<p>[Resposta à pergunta será inserida aqui]</p>
										</div>
									</div>
									
									<div class="faq-item">
										<div class="faq-question" onclick="toggleFAQ(this)">Como posso acompanhar os créditos tributários no novo sistema?</div>
										<div class="faq-answer">
											<p>[Resposta à pergunta será inserida aqui]</p>
										</div>
									</div>
									
									<!-- Outras perguntas serão adicionadas aqui -->
								</div>
								
								<div class="help-navigation">
									<a href="#glossario" class="help-nav-prev" data-target="glossario">Glossário de Termos</a>
									<a href="#exemplos-praticos" class="help-nav-next" data-target="exemplos-praticos">Exemplos Práticos</a>
								</div>
							</div>
							
							<!-- Seção: Exemplos Práticos -->
							<div id="exemplos-praticos" class="help-section">
								<h2 class="help-section-title">Exemplos Práticos</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Exemplo 1: Comércio Varejista</h3>
									
									<div class="example-section">
										<div class="example-title">Cenário</div>
										<p>[Descrição do cenário será inserida aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Dados de Entrada</div>
										<p>[Dados de entrada serão inseridos aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Resultados da Simulação</div>
										<p>[Resultados da simulação serão inseridos aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Estratégias Recomendadas</div>
										<p>[Estratégias recomendadas serão inseridas aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Exemplo 2: Indústria de Transformação</h3>
									
									<div class="example-section">
										<div class="example-title">Cenário</div>
										<p>[Descrição do cenário será inserida aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Dados de Entrada</div>
										<p>[Dados de entrada serão inseridos aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Resultados da Simulação</div>
										<p>[Resultados da simulação serão inseridos aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Estratégias Recomendadas</div>
										<p>[Estratégias recomendadas serão inseridas aqui]</p>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Exemplo 3: Prestação de Serviços</h3>
									
									<div class="example-section">
										<div class="example-title">Cenário</div>
										<p>[Descrição do cenário será inserida aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Dados de Entrada</div>
										<p>[Dados de entrada serão inseridos aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Resultados da Simulação</div>
										<p>[Resultados da simulação serão inseridos aqui]</p>
									</div>
									
									<div class="example-section">
										<div class="example-title">Estratégias Recomendadas</div>
										<p>[Estratégias recomendadas serão inseridas aqui]</p>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#faq" class="help-nav-prev" data-target="faq">FAQ (Perguntas Frequentes)</a>
									<a href="#download-recursos" class="help-nav-next" data-target="download-recursos">Download de Recursos</a>
								</div>
							</div>
							
							<!-- Seção: Download de Recursos -->
							<div id="download-recursos" class="help-section">
								<h2 class="help-section-title">Download de Recursos</h2>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Materiais Complementares</h3>
									<p>Acesse recursos adicionais para aprofundar seus conhecimentos sobre o Split Payment e seu impacto no fluxo de caixa.</p>
									
									<div class="resources-grid">
										<div class="resource-card">
											<div class="resource-icon">📊</div>
											<div class="resource-title">Planilha de Simulação Auxiliar</div>
											<div class="resource-description">Ferramenta complementar para simulações avançadas de impacto no fluxo de caixa.</div>
											<a href="#" class="resource-link">Download Excel</a>
										</div>
										
										<div class="resource-card">
											<div class="resource-icon">📑</div>
											<div class="resource-title">Guia Completo do Split Payment</div>
											<div class="resource-description">E-book detalhado sobre o funcionamento e impactos do Split Payment.</div>
											<a href="#" class="resource-link">Download PDF</a>
										</div>
										
										<div class="resource-card">
											<div class="resource-icon">📽️</div>
											<div class="resource-title">Webinar: Estratégias de Mitigação</div>
											<div class="resource-description">Gravação do webinar com especialistas sobre estratégias eficazes.</div>
											<a href="#" class="resource-link">Acesso ao Vídeo</a>
										</div>
										
										<div class="resource-card">
											<div class="resource-icon">📋</div>
											<div class="resource-title">Checklist de Preparação</div>
											<div class="resource-description">Lista de verificação para preparar sua empresa para o Split Payment.</div>
											<a href="#" class="resource-link">Download PDF</a>
										</div>
									</div>
								</div>
								
								<div class="help-subsection">
									<h3 class="help-subsection-title">Legislação e Normas</h3>
									
									<div class="resources-grid">
										<div class="resource-card">
											<div class="resource-icon">⚖️</div>
											<div class="resource-title">Lei Complementar 214/2025</div>
											<div class="resource-description">Texto completo da legislação que regulamenta o Split Payment.</div>
											<a href="#" class="resource-link">Download PDF</a>
										</div>
										
										<div class="resource-card">
											<div class="resource-icon">📜</div>
											<div class="resource-title">Instrução Normativa RFB</div>
											<div class="resource-description">Regulamentação específica da Receita Federal para o Split Payment.</div>
											<a href="#" class="resource-link">Download PDF</a>
										</div>
										
										<div class="resource-card">
											<div class="resource-icon">📘</div>
											<div class="resource-title">Manual de Procedimentos</div>
											<div class="resource-description">Manual operacional para adequação ao Split Payment.</div>
											<a href="#" class="resource-link">Download PDF</a>
										</div>
									</div>
								</div>
								
								<div class="help-navigation">
									<a href="#exemplos-praticos" class="help-nav-prev" data-target="exemplos-praticos">Exemplos Práticos</a>
									<span></span>
								</div>
							</div>
							
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>	
	
    <!-- Scripts do Simulador -->
	<!-- Substituir na parte inferior do arquivo index.html -->
	<!--script src="js/simulator-unified.js"></!--script>
	<!-- Adicionar no final do arquivo index.html, antes do fechamento da tag body -->
	<script>
	// ======= CONFIGURAÇÃO DO SPLIT PAYMENT =======
	class ConfiguracaoSplitPayment {
		constructor() {
			// Alíquotas base dos tributos
			this.aliquotas_base = {
				"CBS": 0.088,  // 8,8%
				"IBS": 0.177   // 17,7%
			};

			// Cronograma de implementação gradual (2026-2033)
			this.cronograma_implementacao = {
				2026: 0.10,  // 10% de implementação
				2027: 0.25,  // 25% de implementação
				2028: 0.40,  // 40% de implementação
				2029: 0.55,  // 55% de implementação
				2030: 0.70,  // 70% de implementação
				2031: 0.85,  // 85% de implementação
				2032: 0.95,  // 95% de implementação
				2033: 1.00   // 100% de implementação (completa)
			};

			// Configurações setoriais
			this.setores_especiais = {
				"comercio": {
					nome: "Comércio Varejista",
					aliquota_efetiva: 0.265,
					reducao_especial: 0.0,
					cronograma_proprio: false
				},
				"industria": {
					nome: "Indústria",
					aliquota_efetiva: 0.265,
					reducao_especial: 0.0,
					cronograma_proprio: false
				},
				"servicos": {
					nome: "Serviços",
					aliquota_efetiva: 0.265,
					reducao_especial: 0.0,
					cronograma_proprio: false
				}
			};

			// Configurações para análise de fluxo de caixa
			this.parametros_fluxo_caixa = {
				"prazo_pagamento_imposto_atual": 25,  // Dias após o mês
				"prazo_medio_recebimento_padrao": 30, // PMR em dias (padrão)
				"prazo_medio_pagamento_padrao": 30,   // PMP em dias (padrão)
				"prazo_medio_estoque_padrao": 30,     // PME em dias (padrão)
				"taxa_antecipacao_recebiveis": 0.018, // 1,8% a.m.
				"taxa_capital_giro": 0.021,           // 2,1% a.m.
				"spread_bancario": 0.035              // 3,5 p.p.
			};

			// Carregar configurações salvas se existirem
			this.carregarConfiguracoes();
		}

		// Formatação monetária
		formatarMoeda(valor, incluirSimbolo = true) {
			if (valor === undefined || valor === null || isNaN(valor)) {
				return incluirSimbolo ? 'R$ 0,00' : '0,00';
			}

			// Formatação com separador de milhares e casas decimais
			const valorFormatado = valor.toLocaleString('pt-BR', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});

			return incluirSimbolo ? `R$ ${valorFormatado}` : valorFormatado;
		}

		// Formatação percentual
		formatarPercentual(valor, incluirSimbolo = true) {
			if (valor === undefined || valor === null || isNaN(valor)) {
				return incluirSimbolo ? '0,00%' : '0,00';
			}

			// Multiplica por 100 e formata
			const percentual = (valor * 100).toLocaleString('pt-BR', {
				minimumFractionDigits: 2,
				maximumFractionDigits: 2
			});

			return incluirSimbolo ? `${percentual}%` : percentual;
		}

		// Conversão de moeda formatada para número
		converterMoedaParaNumero(valorFormatado) {
			if (!valorFormatado) return 0;

			// Remove o símbolo da moeda e espaços
			let valor = valorFormatado.replace(/R\$\s?/g, '').replace(/\s/g, '');

			// Substitui separadores
			valor = valor.replace(/\./g, '').replace(',', '.');

			return parseFloat(valor) || 0;
		}

		// Conversão de percentual formatado para decimal
		converterPercentualParaNumero(valorFormatado) {
			if (!valorFormatado) return 0;

			// Remove o símbolo de percentual e espaços
			let valor = valorFormatado.replace(/%/g, '').replace(/\s/g, '');

			// Substitui separadores
			valor = valor.replace(/\./g, '').replace(',', '.');

			// Divide por 100 para obter decimal
			return (parseFloat(valor) || 0) / 100;
		}

		// Obtém a alíquota efetiva para um setor
		obterAliquotaEfetivaSetor(codigoSetor) {
			if (this.setores_especiais[codigoSetor]) {
				return this.setores_especiais[codigoSetor].aliquota_efetiva;
			}
			return this.aliquotas_base.CBS + this.aliquotas_base.IBS;
		}

		// Obtém o percentual de implementação para um ano/setor
		obterPercentualImplementacao(ano, codigoSetor = null) {
			// Verificar cronograma específico do setor
			if (codigoSetor && 
				this.setores_especiais[codigoSetor] && 
				this.setores_especiais[codigoSetor].cronograma_proprio &&
				this.setores_especiais[codigoSetor].cronograma &&
				this.setores_especiais[codigoSetor].cronograma[ano]) {

				return this.setores_especiais[codigoSetor].cronograma[ano];
			}

			// Usar cronograma padrão
			if (this.cronograma_implementacao[ano]) {
				return this.cronograma_implementacao[ano];
			}

			// Fora do período de implementação
			if (ano < 2026) return 0;
			if (ano > 2033) return 1.0;

			return 0;
		}
		
		// Adicionar ao objeto SimuladorApp
		obterUltimosResultados: function() {
			return this._ultimosResultados;
		}

		// Salva as configurações no localStorage
		salvarConfiguracoes() {
			try {
				localStorage.setItem('splitPaymentConfig', JSON.stringify({
					aliquotas_base: this.aliquotas_base,
					cronograma_implementacao: this.cronograma_implementacao,
					setores_especiais: this.setores_especiais,
					parametros_fluxo_caixa: this.parametros_fluxo_caixa
				}));
				return true;
			} catch (error) {
				console.error('Erro ao salvar configurações:', error);
				return false;
			}
		}

		// Carrega as configurações do localStorage
		carregarConfiguracoes() {
			try {
				const configSalva = localStorage.getItem('splitPaymentConfig');
				if (configSalva) {
					const config = JSON.parse(configSalva);

					if (config.aliquotas_base) 
						this.aliquotas_base = config.aliquotas_base;

					if (config.cronograma_implementacao) 
						this.cronograma_implementacao = config.cronograma_implementacao;

					if (config.setores_especiais) 
						this.setores_especiais = config.setores_especiais;

					if (config.parametros_fluxo_caixa) 
						this.parametros_fluxo_caixa = config.parametros_fluxo_caixa;

					return true;
				}
				return false;
			} catch (error) {
				console.error('Erro ao carregar configurações:', error);
				return false;
			}
		}
	}

	// ======= SIMULADOR DE FLUXO DE CAIXA =======
	class SimuladorFluxoCaixa {
		constructor(configuracao) {
			this.config = configuracao;

			// Inicializar memória de cálculo
			this.memoriaCalculo = {
				parametrosEntrada: {},
				resultadoAtual: {},
				resultadoSplitPayment: {},
				impactoGeral: {},
				projecaoTemporal: {},
				estrategiasMitigacao: {}
			};
		}

		// Normaliza os dados de entrada
		_normalizarDados(dados) {
			const dadosNormalizados = { ...dados };

			// Normalizar valores monetários
			if (typeof dadosNormalizados.faturamento === 'string') {
				dadosNormalizados.faturamento = this.config.converterMoedaParaNumero(dadosNormalizados.faturamento);
			}

			// Normalizar percentuais
			if (typeof dadosNormalizados.margem === 'string') {
				dadosNormalizados.margem = this.config.converterPercentualParaNumero(dadosNormalizados.margem);
			}

			if (typeof dadosNormalizados.aliquota === 'string') {
				dadosNormalizados.aliquota = this.config.converterPercentualParaNumero(dadosNormalizados.aliquota);
			}

			if (typeof dadosNormalizados.percVista === 'string') {
				dadosNormalizados.percVista = this.config.converterPercentualParaNumero(dadosNormalizados.percVista);
			}

			if (typeof dadosNormalizados.percPrazo === 'string') {
				dadosNormalizados.percPrazo = this.config.converterPercentualParaNumero(dadosNormalizados.percPrazo);
			}

			// Normalizar prazos
			['pmr', 'pmp', 'pme'].forEach(campo => {
				if (typeof dadosNormalizados[campo] === 'string') {
					dadosNormalizados[campo] = parseInt(dadosNormalizados[campo], 10) || 0;
				}
			});

			// Calcular faturamento mensal se necessário
			if (dadosNormalizados.periodo === 'anual') {
				dadosNormalizados.faturamentoMensal = dadosNormalizados.faturamento / 12;
			} else {
				dadosNormalizados.faturamentoMensal = dadosNormalizados.faturamento;
			}

			// Calcular ciclo financeiro
			if (!dadosNormalizados.cicloFinanceiro) {
				dadosNormalizados.cicloFinanceiro = 
					dadosNormalizados.pmr + 
					dadosNormalizados.pme - 
					dadosNormalizados.pmp;
			}

			// Registrar os dados normalizados
			this.memoriaCalculo.parametrosEntrada = dadosNormalizados;

			return dadosNormalizados;
		}

		// Calcula o fluxo de caixa no regime atual
		calcularFluxoCaixaAtual(dados) {
			const dadosNorm = this._normalizarDados(dados);

			// Extrair parâmetros relevantes
			const {
				faturamentoMensal,
				aliquota,
				pmr,
				percVista,
				percPrazo
			} = dadosNorm;

			// Cálculos básicos
			const vendasVista = faturamentoMensal * percVista;
			const vendasPrazo = faturamentoMensal * percPrazo;
			const valorTributos = faturamentoMensal * aliquota;

			// Prazo de pagamento de impostos
			const prazoPagamentoImpostoAtual = this.config.parametros_fluxo_caixa.prazo_pagamento_imposto_atual;
			const prazoEfetivoPagamentoImposto = 30 + prazoPagamentoImpostoAtual;

			// Capital de giro disponível temporariamente
			const capitalGiroTributario = valorTributos * (prazoEfetivoPagamentoImposto / 30);

			// Fluxo de caixa
			const fluxoCaixaVendasVista = vendasVista;
			const fluxoCaixaVendasPrazo = vendasPrazo * (pmr / 30);

			// Resultados
			const resultados = {
				vendasVista,
				vendasPrazo,
				valorTributos,
				prazoPagamentoImpostoAtual,
				prazoEfetivoPagamentoImposto,
				capitalGiroTributario,
				fluxoCaixaVendasVista,
				fluxoCaixaVendasPrazo,
				totalRecebimentos: vendasVista + vendasPrazo,
				totalDesembolsos: valorTributos,
				saldoFluxoCaixa: vendasVista + vendasPrazo - valorTributos
			};

			// Registrar resultados
			this.memoriaCalculo.resultadoAtual = resultados;

			return resultados;
		}

		// Calcula o fluxo de caixa com Split Payment
		calcularFluxoCaixaSplitPayment(dados, ano = 2026) {
			const dadosNorm = this._normalizarDados(dados);

			// Extrair parâmetros relevantes
			const {
				faturamentoMensal,
				aliquota,
				pmr,
				percVista,
				percPrazo,
				setor
			} = dadosNorm;

			// Obter percentual de implementação
			const percentualImplementacao = this.config.obterPercentualImplementacao(ano, setor);

			// Cálculos básicos
			const vendasVista = faturamentoMensal * percVista;
			const vendasPrazo = faturamentoMensal * percPrazo;
			const valorTributos = faturamentoMensal * aliquota;

			// Divisão entre Split Payment e método convencional
			const tributosSplit = valorTributos * percentualImplementacao;
			const tributosConvencionais = valorTributos - tributosSplit;

			// Tributos retidos por tipo de venda
			const tributosSplitVendasVista = vendasVista * aliquota * percentualImplementacao;
			const tributosSplitVendasPrazo = vendasPrazo * aliquota * percentualImplementacao;

			// Valores líquidos recebidos
			const recebimentoLiquidoVendasVista = vendasVista - tributosSplitVendasVista;
			const recebimentoLiquidoVendasPrazo = vendasPrazo - tributosSplitVendasPrazo;

			// Prazo para tributos convencionais
			const prazoPagamentoImpostoAtual = this.config.parametros_fluxo_caixa.prazo_pagamento_imposto_atual;
			const prazoEfetivoPagamentoImposto = 30 + prazoPagamentoImpostoAtual;

			// Capital de giro para tributos convencionais
			const capitalGiroTributosConvencionais = tributosConvencionais * (prazoEfetivoPagamentoImposto / 30);

			// Fluxo de caixa ajustado
			const fluxoCaixaVendasVista = recebimentoLiquidoVendasVista;
			const fluxoCaixaVendasPrazo = recebimentoLiquidoVendasPrazo * (pmr / 30);

			// Impacto da antecipação
			const impactoAntecipacaoTributos = tributosSplit * ((prazoEfetivoPagamentoImposto - 1) / 30);

			// Resultados
			const resultados = {
				vendasVista,
				vendasPrazo,
				valorTributos,
				percentualImplementacao,
				tributosSplit,
				tributosConvencionais,
				tributosSplitVendasVista,
				tributosSplitVendasPrazo,
				recebimentoLiquidoVendasVista,
				recebimentoLiquidoVendasPrazo,
				prazoEfetivoPagamentoImposto,
				capitalGiroTributosConvencionais,
				fluxoCaixaVendasVista,
				fluxoCaixaVendasPrazo,
				impactoAntecipacaoTributos,
				totalRecebimentosLiquidos: recebimentoLiquidoVendasVista + recebimentoLiquidoVendasPrazo,
				totalDesembolsosTributos: tributosConvencionais,
				saldoFluxoCaixa: recebimentoLiquidoVendasVista + recebimentoLiquidoVendasPrazo - tributosConvencionais
			};

			// Registrar resultados
			this.memoriaCalculo.resultadoSplitPayment = resultados;

			return resultados;
		}

		// Calcula o impacto no capital de giro
		calcularImpactoCapitalGiro(dados, ano = 2026) {
			// Calcular fluxos nos dois cenários
			const resultadoAtual = this.calcularFluxoCaixaAtual(dados);
			const resultadoSplit = this.calcularFluxoCaixaSplitPayment(dados, ano);

			// Extrair dados normalizados
			const dadosNorm = this.memoriaCalculo.parametrosEntrada;

			// Capital de giro no modelo atual
			const capitalGiroAtual = 
				resultadoAtual.vendasPrazo * (dadosNorm.pmr / 30) - 
				resultadoAtual.valorTributos * (resultadoAtual.prazoEfetivoPagamentoImposto / 30);

			// Capital de giro com Split Payment
			const capitalGiroSplit = 
				resultadoSplit.recebimentoLiquidoVendasPrazo * (dadosNorm.pmr / 30) - 
				resultadoSplit.tributosConvencionais * (resultadoSplit.prazoEfetivoPagamentoImposto / 30);

			// Diferença e impacto percentual
			const diferencaCapitalGiro = capitalGiroSplit - capitalGiroAtual;
			const percentualImpacto = capitalGiroAtual !== 0 ? 
				(diferencaCapitalGiro / Math.abs(capitalGiroAtual)) * 100 : 0;

			// Necessidade adicional de capital
			const necessidadeAdicionalCapitalGiro = diferencaCapitalGiro < 0 ? 
				Math.abs(diferencaCapitalGiro) : 0;

			// Custo financeiro anual
			const custoFinanceiroAnual = necessidadeAdicionalCapitalGiro * 
				(this.config.parametros_fluxo_caixa.taxa_capital_giro * 12);

			// Impacto sobre a margem
			const margemOperacionalOriginal = dadosNorm.margem || 0.15;
			const impactoSobreMargem = (custoFinanceiroAnual / (dadosNorm.faturamentoMensal * 12)) * 100;
			const margemOperacionalAjustada = margemOperacionalOriginal - impactoSobreMargem;

			// Resultados
			const resultados = {
				capitalGiroAtual,
				capitalGiroSplit,
				diferencaCapitalGiro,
				percentualImpacto,
				necessidadeAdicionalCapitalGiro,
				custoFinanceiroAnual,
				margemOperacionalOriginal,
				impactoSobreMargem,
				margemOperacionalAjustada,

				// Detalhes adicionais
				ano,
				percentualImplementacao: resultadoSplit.percentualImplementacao,
				detalhesFluxoAtual: resultadoAtual,
				detalhesFluxoSplit: resultadoSplit
			};

			// Registrar resultados
			this.memoriaCalculo.impactoGeral = resultados;

			return resultados;
		}

		// Simulação completa
		simular(dados, opcoesSimulacao = {}) {
			// Opções padrão
			const opcoes = {
				anoInicial: 2026,
				anoFinal: 2033,
				cenario: 'moderado',
				taxaCrescimento: null,
				...opcoesSimulacao
			};

			// Resultados básicos
			const resultadoBase = this.calcularImpactoCapitalGiro(dados, opcoes.anoInicial);

			// Resultados completos
			const resultados = {
				parametrosEntrada: this.memoriaCalculo.parametrosEntrada,
				resultadoBase,
				memoriaCalculo: this.memoriaCalculo
			};

			return resultados;
		}
		// Adicionar ao final da definição da classe SimuladorFluxoCaixa
		obterMemoriaCalculo: function() {
			return this.memoriaCalculo;
		}
	}

	// ======= APLICATIVO PRINCIPAL =======
	const SimuladorApp = {
		// Configuração global do aplicativo
		config: null,

		// Simulador de fluxo de caixa
		simulador: null,

		// Inicializa a aplicação
		inicializar: function() {
			console.log('Inicializando Simulador de Impacto do Split Payment...');

			// Inicializar configuração
			this.config = new ConfiguracaoSplitPayment();

			// Inicializar simulador
			this.simulador = new SimuladorFluxoCaixa(this.config);

			// Configurar navegação de abas
			this.inicializarNavegacao();

			// Configurar event listeners
			this.configurarEventListeners();

			// Carregar valores na interface
			this.carregarValoresInterface();

			console.log('Simulador de Impacto do Split Payment inicializado com sucesso.');
		},

		// Inicializa o sistema de navegação por abas
		inicializarNavegacao: function() {
			const tabButtons = document.querySelectorAll('.tab-button');
			const tabContents = document.querySelectorAll('.tab-content');

			// Adicionar event listeners para botões de aba
			tabButtons.forEach(button => {
				button.addEventListener('click', function() {
					// Remover classe active de todas as abas
					tabButtons.forEach(btn => btn.classList.remove('active'));
					tabContents.forEach(content => content.classList.remove('active'));

					// Adicionar classe active à aba clicada
					this.classList.add('active');

					// Mostrar conteúdo correspondente
					const tabId = this.getAttribute('data-tab');
					document.getElementById(tabId).classList.add('active');

					// Executar ações específicas para cada aba
					SimuladorApp.aoMudarAba(tabId);
				});
			});

			// Também configura as subabas
			const subtabButtons = document.querySelectorAll('.subtab-button');
			const subtabContents = document.querySelectorAll('.subtab-content');

			subtabButtons.forEach(button => {
				button.addEventListener('click', function() {
					// Encontrar o container pai desta subaba
					const parentTab = this.closest('.tab-content');
					if (!parentTab) return;

					// Remover classe active de todas as subabas neste container
					const relatedButtons = parentTab.querySelectorAll('.subtab-button');
					const relatedContents = parentTab.querySelectorAll('.subtab-content');

					relatedButtons.forEach(btn => btn.classList.remove('active'));
					relatedContents.forEach(content => content.classList.remove('active'));

					// Adicionar classe active à subaba clicada
					this.classList.add('active');

					// Mostrar conteúdo correspondente
					const subtabId = this.getAttribute('data-subtab');
					const subtabContent = document.getElementById(subtabId);
					if (subtabContent) subtabContent.classList.add('active');
				});
			});
		},

		// Ações a executar quando mudar de aba
		aoMudarAba: function(tabId) {
			switch (tabId) {
				case 'memoria-calculo':
					this.atualizarMemoriaCalculo();
					break;
			}
		},

		// Configura event listeners
		configurarEventListeners: function() {
			// Botão Simular
			const btnSimular = document.getElementById('btn-simular');
			if (btnSimular) {
				// Limpar event listeners existentes
				const novoBtn = btnSimular.cloneNode(true);
				if (btnSimular.parentNode) {
					btnSimular.parentNode.replaceChild(novoBtn, btnSimular);
				}

				// Adicionar novo event listener
				novoBtn.addEventListener('click', () => {
					this.realizarSimulacao();
				});
			}

			// Botão Limpar
			const btnLimpar = document.getElementById('btn-limpar');
			if (btnLimpar) {
				// Limpar event listeners existentes
				const novoBtn = btnLimpar.cloneNode(true);
				if (btnLimpar.parentNode) {
					btnLimpar.parentNode.replaceChild(novoBtn, btnLimpar);
				}

				// Adicionar novo event listener
				novoBtn.addEventListener('click', () => {
					this.limparFormulario();
				});
			}

			// Cenário Personalizado
			const selectCenario = document.getElementById('cenario');
			const divCenarioPersonalizado = document.getElementById('cenario-personalizado');

			if (selectCenario && divCenarioPersonalizado) {
				selectCenario.addEventListener('change', function() {
					divCenarioPersonalizado.style.display = 
						this.value === 'personalizado' ? 'block' : 'none';
				});

				// Inicializar visibilidade
				divCenarioPersonalizado.style.display = 
					selectCenario.value === 'personalizado' ? 'block' : 'none';
			}

			// Calcular ciclo financeiro automaticamente
			const pmrInput = document.getElementById('pmr');
			const pmpInput = document.getElementById('pmp');
			const pmeInput = document.getElementById('pme');
			const cicloFinanceiroInput = document.getElementById('ciclo-financeiro');

			const atualizarCicloFinanceiro = () => {
				if (pmrInput && pmpInput && pmeInput && cicloFinanceiroInput) {
					const pmr = parseInt(pmrInput.value) || 0;
					const pmp = parseInt(pmpInput.value) || 0;
					const pme = parseInt(pmeInput.value) || 0;

					const ciclo = pmr + pme - pmp;
					cicloFinanceiroInput.value = ciclo;
				}
			};

			if (pmrInput) pmrInput.addEventListener('input', atualizarCicloFinanceiro);
			if (pmpInput) pmpInput.addEventListener('input', atualizarCicloFinanceiro);
			if (pmeInput) pmeInput.addEventListener('input', atualizarCicloFinanceiro);

			// Calcular inicial
			atualizarCicloFinanceiro();

			// Calcular vendas a prazo a partir das vendas à vista
			const percVistaInput = document.getElementById('perc-vista');
			const percPrazoInput = document.getElementById('perc-prazo');

			const atualizarPercPrazo = () => {
				if (percVistaInput && percPrazoInput) {
					const percVista = this.config.converterPercentualParaNumero(percVistaInput.value);
					const percPrazo = 1 - percVista;
					percPrazoInput.value = this.config.formatarPercentual(percPrazo);
				}
			};

			if (percVistaInput) {
				percVistaInput.addEventListener('input', atualizarPercPrazo);
				percVistaInput.addEventListener('blur', atualizarPercPrazo);
			}

			// Inicializar calculador de vendas a prazo
			if (percVistaInput && percVistaInput.value) {
				atualizarPercPrazo();
			} else if (percVistaInput) {
				percVistaInput.value = this.config.formatarPercentual(0.3); // 30% padrão
				atualizarPercPrazo();
			}

			// Configurar formatação inicial para inputs
			this.configurarFormatacaoCampos();
		},

		// Configura a formatação dos campos monetários e percentuais
		configurarFormatacaoCampos: function() {
			if (!this.config) return;

			// Formatar campos monetários
			document.querySelectorAll('.money-input').forEach(input => {
				// Evento blur para formatação
				input.addEventListener('blur', () => {
					if (input.value) {
						const valor = this.config.converterMoedaParaNumero(input.value);
						input.value = this.config.formatarMoeda(valor);
					}
				});

				// Formatar valor inicial se existir
				if (input.value && input.value !== '') {
					const valor = this.config.converterMoedaParaNumero(input.value);
					input.value = this.config.formatarMoeda(valor);
				}
			});

			// Formatar campos percentuais
			document.querySelectorAll('.percent-input').forEach(input => {
				// Evento blur para formatação
				input.addEventListener('blur', () => {
					if (input.value) {
						const valor = this.config.converterPercentualParaNumero(input.value);
						input.value = this.config.formatarPercentual(valor);
					}
				});

				// Formatar valor inicial se existir
				if (input.value && input.value !== '') {
					const valor = this.config.converterPercentualParaNumero(input.value);
					input.value = this.config.formatarPercentual(valor);
				}
			});
		},

		// Carrega os valores da configuração na interface
		carregarValoresInterface: function() {
			// Inicializar com valores padrão onde necessário
			const pmrInput = document.getElementById('pmr');
			const pmpInput = document.getElementById('pmp');
			const pmeInput = document.getElementById('pme');

			if (pmrInput && !pmrInput.value) pmrInput.value = "30";
			if (pmpInput && !pmpInput.value) pmpInput.value = "30";
			if (pmeInput && !pmeInput.value) pmeInput.value = "30";

			// Recalcular ciclo financeiro
			const cicloFinanceiroInput = document.getElementById('ciclo-financeiro');
			if (cicloFinanceiroInput) {
				const pmr = parseInt(pmrInput?.value || "0");
				const pmp = parseInt(pmpInput?.value || "0");
				const pme = parseInt(pmeInput?.value || "0");
				cicloFinanceiroInput.value = (pmr + pme - pmp).toString();
			}

			// Inicializar percentuais de venda
			const percVistaInput = document.getElementById('perc-vista');
			const percPrazoInput = document.getElementById('perc-prazo');

			if (percVistaInput && !percVistaInput.value) {
				percVistaInput.value = this.config.formatarPercentual(0.3);
			}

			if (percPrazoInput) {
				percPrazoInput.value = this.config.formatarPercentual(
					1 - this.config.converterPercentualParaNumero(percVistaInput?.value || "30%")
				);
			}
		},

		// Coleta dados do formulário
		coletarDadosFormulario: function() {
			// Dados básicos da empresa
			const faturamentoEl = document.getElementById('faturamento');
			const faturamento = this.config.converterMoedaParaNumero(faturamentoEl.value);

			const periodoEl = document.querySelector('input[name="periodo"]:checked');
			const periodo = periodoEl ? periodoEl.value : 'mensal';

			const setor = document.getElementById('setor').value;
			const regime = document.getElementById('regime').value;

			const margemEl = document.getElementById('margem');
			const margem = this.config.converterPercentualParaNumero(margemEl.value);

			// Ciclo financeiro
			const pmr = parseInt(document.getElementById('pmr').value, 10) || 0;
			const pmp = parseInt(document.getElementById('pmp').value, 10) || 0;
			const pme = parseInt(document.getElementById('pme').value, 10) || 0;
			const cicloFinanceiro = parseInt(document.getElementById('ciclo-financeiro').value, 10) || 0;

			const percVistaEl = document.getElementById('perc-vista');
			const percVista = this.config.converterPercentualParaNumero(percVistaEl.value);

			const percPrazoEl = document.getElementById('perc-prazo');
			const percPrazo = this.config.converterPercentualParaNumero(percPrazoEl.value);

			// Parâmetros tributários
			const aliquotaEl = document.getElementById('aliquota');
			const aliquota = this.config.converterPercentualParaNumero(aliquotaEl.value);

			const tipoOperacao = document.getElementById('tipo-operacao').value;

			const creditosEl = document.getElementById('creditos');
			const creditos = this.config.converterMoedaParaNumero(creditosEl.value);

			// Parâmetros de simulação
			const dataInicial = document.getElementById('data-inicial').value;
			const dataFinal = document.getElementById('data-final').value;
			const cenario = document.getElementById('cenario').value;

			// Parâmetros de cenário personalizado
			let taxaCrescimento = null;
			if (cenario === 'personalizado') {
				const taxaCrescimentoEl = document.getElementById('taxa-crescimento');
				taxaCrescimento = parseFloat(taxaCrescimentoEl.value);
			}

			// Retornar objeto com todos os dados
			return {
				faturamento,
				periodo,
				setor,
				regime,
				margem,
				pmr,
				pmp,
				pme,
				cicloFinanceiro,
				percVista,
				percPrazo,
				aliquota,
				tipoOperacao,
				creditos,
				dataInicial,
				dataFinal,
				cenario,
				taxaCrescimento
			};
		},

		// Valida os dados do formulário
		validarDados: function(dados) {
			// Validações básicas
			if (isNaN(dados.faturamento) || dados.faturamento <= 0) {
				alert('Por favor, informe um valor de faturamento válido.');
				return false;
			}

			if (isNaN(dados.margem)) {
				alert('Por favor, informe uma margem operacional válida.');
				return false;
			}

			if (!dados.setor) {
				alert('Por favor, selecione um setor de atividade.');
				return false;
			}

			if (!dados.regime) {
				alert('Por favor, selecione um regime tributário.');
				return false;
			}

			if (isNaN(dados.aliquota) || dados.aliquota <= 0) {
				alert('Por favor, informe uma alíquota válida.');
				return false;
			}

			if (!dados.tipoOperacao) {
				alert('Por favor, selecione um tipo de operação predominante.');
				return false;
			}

			if (dados.cenario === 'personalizado' && 
				(isNaN(dados.taxaCrescimento) || dados.taxaCrescimento < 0)) {
				alert('Por favor, informe uma taxa de crescimento válida para o cenário personalizado.');
				return false;
			}

			// Se chegou até aqui, os dados são válidos
			return true;
		},

		// Realiza a simulação
		realizarSimulacao: function() {
			// Verificar se o simulador foi inicializado
			if (!this.simulador) {
				alert('O simulador ainda não foi inicializado. Tente novamente em alguns instantes.');
				return;
			}

			// Coletar dados do formulário
			const dados = this.coletarDadosFormulario();

			// Validar dados
			if (!this.validarDados(dados)) {
				return;
			}

			// Configurar opções de simulação
			const opcoesSimulacao = {
				anoInicial: parseInt(dados.dataInicial.split('-')[0], 10),
				anoFinal: parseInt(dados.dataFinal.split('-')[0], 10),
				cenario: dados.cenario,
				taxaCrescimento: dados.cenario === 'personalizado' ? 
					parseFloat(dados.taxaCrescimento) / 100 : null,
				simularEstrategias: false  // Inicialmente sem estratégias
			};

			// Executar simulação
			try {
				console.log('Iniciando simulação com dados:', dados);
				const resultados = this.simulador.simular(dados, opcoesSimulacao);
				console.log('Simulação concluída:', resultados);

				// Exibir resultados
				this.exibirResultados(resultados);
				
				// Atualizar explicitamente a memória de cálculo
				this.atualizarMemoriaCalculo();
				
				// Tornar os resultados disponíveis para outras partes do sistema
				this._ultimosResultados = resultados;
				
				return resultados;
			} catch (error) {
				console.error('Erro ao executar a simulação:', error);
				alert('Ocorreu um erro ao executar a simulação. Verifique o console para mais detalhes.');
			}
		},

		// Exibe os resultados da simulação
		exibirResultados: function(resultados) {
			const containerResultados = document.getElementById('resultados');
			if (!containerResultados) return;

			// Extrair dados principais
			const impacto = resultados.resultadoBase;
			const projecao = resultados.projecaoTemporal;

			// Formatar valores para exibição
			const formatarValor = valor => this.config.formatarMoeda(valor);
			const formatarPercent = valor => this.config.formatarPercentual(valor);

			// Construir HTML dos resultados
			let html = `
				<div class="result-card">
					<h3>Resultados da Simulação</h3>

					<div class="result-section">
						<h4>Impacto Inicial (${projecao?.parametros?.anoInicial || impacto.ano})</h4>
						<table class="result-table">
							<tr>
								<td>Percentual de Implementação:</td>
								<td>${formatarPercent(impacto.percentualImplementacao)}</td>
							</tr>
							<tr>
								<td>Diferença no Capital de Giro:</td>
								<td class="${impacto.diferencaCapitalGiro >= 0 ? 'positive' : 'negative'}">
									${formatarValor(impacto.diferencaCapitalGiro)}
								</td>
							</tr>
							<tr>
								<td>Impacto Percentual:</td>
								<td class="${impacto.percentualImpacto >= 0 ? 'positive' : 'negative'}">
									${formatarPercent(impacto.percentualImpacto/100)}
								</td>
							</tr>
							<tr>
								<td>Necessidade Adicional de Capital:</td>
								<td>${formatarValor(impacto.necessidadeAdicionalCapitalGiro)}</td>
							</tr>
							<tr>
								<td>Impacto na Margem Operacional:</td>
								<td>De ${formatarPercent(impacto.margemOperacionalOriginal)} para ${formatarPercent(impacto.margemOperacionalAjustada)}</td>
							</tr>
						</table>
					</div>

					<div class="call-to-action">
						<button id="btn-estrategias" class="primary">Simular Estratégias de Mitigação</button>
						<button id="btn-detalhes" class="secondary">Ver Detalhes Completos</button>
					</div>
				</div>
			`;

			// Inserir o HTML no container
			containerResultados.innerHTML = html;

			// Adicionar event listeners aos botões
			document.getElementById('btn-estrategias')?.addEventListener('click', () => {
				// Ativar a aba de estratégias
				document.querySelector('.tab-button[data-tab="estrategias-mitigacao"]')?.click();
			});

			document.getElementById('btn-detalhes')?.addEventListener('click', () => {
				// Ativar a aba de memória de cálculo
				document.querySelector('.tab-button[data-tab="memoria-calculo"]')?.click();
			});
		},

		// Limpa o formulário
		limparFormulario: function() {
			document.getElementById('simulacao-form')?.reset();

			// Limpar resultados
			const containerResultados = document.getElementById('resultados');
			if (containerResultados) containerResultados.innerHTML = '';
		},

		// Atualiza a memória de cálculo
		atualizarMemoriaCalculo: function() {
			const memoryContainer = document.getElementById('memory-content');
			if (!memoryContainer || !this.simulador) return;

			// Obter a memória de cálculo do simulador usando o novo método
			const memoriaCalculo = this.simulador.obterMemoriaCalculo();

			// Verificar se há conteúdo na memória
			if (Object.keys(memoriaCalculo.parametrosEntrada).length === 0) {
				memoryContainer.innerHTML = `
					<div class="calculation-section">
						<div class="calculation-section-title">Memória de Cálculo</div>
						<div class="calculation-line comment">Ainda não há simulações realizadas. Execute uma simulação para visualizar a memória de cálculo.</div>
					</div>
				`;
				return;
			}

			// Formatar a memória de cálculo para exibição
			let html = '';

			// Parâmetros de entrada
			html += `<div class="calculation-section">
				<div class="calculation-section-title">== PARÂMETROS DE ENTRADA ==</div>`;

			// Formatar cada parâmetro de entrada
			const params = memoriaCalculo.parametrosEntrada;
			for (const [key, value] of Object.entries(params)) {
				let valorFormatado = value;

				// Formatar valores monetários e percentuais
				if (key.includes('faturamento') || key.includes('creditos')) {
					valorFormatado = this.config.formatarMoeda(value);
				} else if (key.includes('margem') || key.includes('aliquota') || key.includes('perc')) {
					valorFormatado = this.config.formatarPercentual(value);
				}

				html += `<div class="calculation-line input">${key}: ${valorFormatado}</div>`;
			}

			html += `</div>`;

			// Fluxo de caixa atual
			html += `<div class="calculation-section">
				<div class="calculation-section-title">== CÁLCULO DO FLUXO DE CAIXA ATUAL ==</div>`;

			// Formatar cálculos do fluxo atual
			const fluxoAtual = memoriaCalculo.resultadoAtual;
			html += `<div class="calculation-line comment"># Cálculo das vendas mensais por modalidade</div>`;
			html += `<div class="calculation-line formula">Vendas à Vista = Faturamento * % Vendas à Vista</div>`;
			html += `<div class="calculation-line formula">Vendas à Vista = ${this.config.formatarMoeda(params.faturamentoMensal)} * ${this.config.formatarPercentual(params.percVista)}</div>`;
			html += `<div class="calculation-line result">Vendas à Vista = ${this.config.formatarMoeda(fluxoAtual.vendasVista)}</div>`;

			html += `<div class="calculation-line formula">Vendas a Prazo = Faturamento * % Vendas a Prazo</div>`;
			html += `<div class="calculation-line formula">Vendas a Prazo = ${this.config.formatarMoeda(params.faturamentoMensal)} * ${this.config.formatarPercentual(params.percPrazo)}</div>`;
			html += `<div class="calculation-line result">Vendas a Prazo = ${this.config.formatarMoeda(fluxoAtual.vendasPrazo)}</div>`;

			html += `<div class="calculation-line comment"># Cálculo dos impostos</div>`;
			html += `<div class="calculation-line formula">Impostos = Faturamento * Alíquota Efetiva</div>`;
			html += `<div class="calculation-line formula">Impostos = ${this.config.formatarMoeda(params.faturamentoMensal)} * ${this.config.formatarPercentual(params.aliquota)}</div>`;
			html += `<div class="calculation-line result">Impostos = ${this.config.formatarMoeda(fluxoAtual.valorTributos)}</div>`;

			html += `<div class="calculation-line comment"># Cálculo do prazo de pagamento do imposto atual</div>`;
			html += `<div class="calculation-line variable">Prazo de Pagamento do Imposto = ${fluxoAtual.prazoPagamentoImpostoAtual} dias (após o mês)</div>`;
			html += `<div class="calculation-line formula">Prazo Efetivo = 30 + ${fluxoAtual.prazoPagamentoImpostoAtual} = ${fluxoAtual.prazoEfetivoPagamentoImposto} dias</div>`;

			html += `</div>`;

			// Fluxo de caixa com Split Payment
			html += `<div class="calculation-section">
				<div class="calculation-section-title">== CÁLCULO DO FLUXO DE CAIXA COM SPLIT PAYMENT ==</div>`;

			const fluxoSplit = memoriaCalculo.resultadoSplitPayment;
			html += `<div class="calculation-line comment"># Parâmetros do Split Payment para ${memoriaCalculo.impactoGeral.ano}</div>`;
			html += `<div class="calculation-line variable">Percentual de Implementação (${memoriaCalculo.impactoGeral.ano}) = ${this.config.formatarPercentual(fluxoSplit.percentualImplementacao)}</div>`;

			html += `<div class="calculation-line comment"># Cálculo dos impostos em Split Payment</div>`;
			html += `<div class="calculation-line formula">Impostos Split = Impostos * Percentual de Implementação</div>`;
			html += `<div class="calculation-line formula">Impostos Split = ${this.config.formatarMoeda(fluxoSplit.valorTributos)} * ${this.config.formatarPercentual(fluxoSplit.percentualImplementacao)}</div>`;
			html += `<div class="calculation-line result">Impostos Split = ${this.config.formatarMoeda(fluxoSplit.tributosSplit)}</div>`;

			html += `<div class="calculation-line formula">Impostos Convencionais = Impostos - Impostos Split</div>`;
			html += `<div class="calculation-line formula">Impostos Convencionais = ${this.config.formatarMoeda(fluxoSplit.valorTributos)} - ${this.config.formatarMoeda(fluxoSplit.tributosSplit)}</div>`;
			html += `<div class="calculation-line result">Impostos Convencionais = ${this.config.formatarMoeda(fluxoSplit.tributosConvencionais)}</div>`;

			html += `<div class="calculation-line comment"># Cálculo do impacto no fluxo de vendas a prazo</div>`;
			html += `<div class="calculation-line formula">Impostos Split nas Vendas a Prazo = Vendas a Prazo * Alíquota Efetiva * % Implementação</div>`;
			html += `<div class="calculation-line formula">Impostos Split nas Vendas a Prazo = ${this.config.formatarMoeda(fluxoSplit.vendasPrazo)} * ${this.config.formatarPercentual(params.aliquota)} * ${this.config.formatarPercentual(fluxoSplit.percentualImplementacao)}</div>`;
			html += `<div class="calculation-line result">Impostos Split nas Vendas a Prazo = ${this.config.formatarMoeda(fluxoSplit.tributosSplitVendasPrazo)}</div>`;

			html += `</div>`;

			// Impacto no capital de giro
			html += `<div class="calculation-section">
				<div class="calculation-section-title">== IMPACTO NO CAPITAL DE GIRO ==</div>`;

			const impacto = memoriaCalculo.impactoGeral;
			html += `<div class="calculation-line comment"># Cálculo do Capital de Giro Comprometido no modelo atual</div>`;
			html += `<div class="calculation-line formula">Capital de Giro Atual = (Vendas a Prazo / 30) * PMR - (Impostos / 30) * (Prazo Efetivo)</div>`;
			html += `<div class="calculation-line formula">Capital de Giro Atual = (${this.config.formatarMoeda(fluxoAtual.vendasPrazo)} / 30) * ${params.pmr} - (${this.config.formatarMoeda(fluxoAtual.valorTributos)} / 30) * ${fluxoAtual.prazoEfetivoPagamentoImposto}</div>`;
			html += `<div class="calculation-line result">Capital de Giro Atual = ${this.config.formatarMoeda(impacto.capitalGiroAtual)}</div>`;

			html += `<div class="calculation-line comment"># Cálculo do Capital de Giro Comprometido com Split Payment</div>`;
			html += `<div class="calculation-line formula">Capital de Giro Split = (Recebimento Líquido Vendas a Prazo / 30) * PMR - (Impostos Convencionais / 30) * (Prazo Efetivo)</div>`;
			html += `<div class="calculation-line formula">Capital de Giro Split = (${this.config.formatarMoeda(fluxoSplit.recebimentoLiquidoVendasPrazo)} / 30) * ${params.pmr} - (${this.config.formatarMoeda(fluxoSplit.tributosConvencionais)} / 30) * ${fluxoSplit.prazoEfetivoPagamentoImposto}</div>`;
			html += `<div class="calculation-line result">Capital de Giro Split = ${this.config.formatarMoeda(impacto.capitalGiroSplit)}</div>`;

			html += `<div class="calculation-line comment"># Cálculo do Impacto no Capital de Giro</div>`;
			html += `<div class="calculation-line formula">Impacto = Capital de Giro Split - Capital de Giro Atual</div>`;
			html += `<div class="calculation-line formula">Impacto = ${this.config.formatarMoeda(impacto.capitalGiroSplit)} - ${this.config.formatarMoeda(impacto.capitalGiroAtual)}</div>`;
			html += `<div class="calculation-line result">Impacto = ${this.config.formatarMoeda(impacto.diferencaCapitalGiro)} (${impacto.diferencaCapitalGiro < 0 ? 'Redução' : 'Aumento'} no Capital de Giro)</div>`;

			html += `</div>`;

			// Inserir o HTML formatado no container
			memoryContainer.innerHTML = html;

			// Atualizar contador de linhas
			const lineCount = document.getElementById('line-count');
			if (lineCount) {
				const lines = memoryContainer.querySelectorAll('.calculation-line').length;
				lineCount.textContent = `Linhas: ${lines}`;
			}
		}
	};

	// Inicializar o simulador quando o DOM estiver pronto
	document.addEventListener('DOMContentLoaded', function() {
		console.log('DOM carregado, inicializando simulador...');
		SimuladorApp.inicializar();
	});
	</script>
	<script src="js/formatacao.js"></script>
	<!-- Remover ou comentar estas linhas -->
	<!-- <script src="js/config.js"></script> -->
	<!-- <script src="js/formatacao.js"></script> -->
	<!-- <script src="js/tab-navigation-system.js"></script> -->
	<!-- <script type="module" src="js/simulador.js"></script> -->
	<!-- <script src="js/app.js"></script> -->
	<script>
		// Função para carregar valores da configuração na interface
		function carregarValoresInterface(configuracao) {
			// Carregar alíquotas base
			const inputCBS = document.getElementById('aliquota-cbs');
			const inputIBS = document.getElementById('aliquota-ibs');
			
			if (inputCBS) inputCBS.value = (configuracao.aliquotas_base.CBS * 100).toFixed(2);
			if (inputIBS) inputIBS.value = (configuracao.aliquotas_base.IBS * 100).toFixed(2);
			
			// Carregar cronograma
			for (let ano = 2026; ano <= 2033; ano++) {
				const inputPerc = document.querySelector(`input[name="perc-${ano}"]`);
				if (inputPerc && configuracao.cronograma_implementacao[ano] !== undefined) {
					inputPerc.value = (configuracao.cronograma_implementacao[ano] * 100).toFixed(1);
				}
			}
			
			// Aqui você implementaria o carregamento das configurações setoriais
			// Este código depende da estrutura exata da tabela de setores
		}

		// Chamar a função durante a inicialização
		document.addEventListener('DOMContentLoaded', function() {		
			// Inicializar configurações
			const configuracao = new ConfiguracaoSplitPayment();
			configuracao.carregarConfiguracoes();
			
			// Por enquanto, apenas expõe a configuração globalmente
			window.configuracaoSplitPayment = configuracao;
			
			// Aqui serão inicializados outros componentes que dependem da configuração
			console.log("Configuração do Split Payment inicializada:", configuracao);
		});
			// Carregar valores na interface
			carregarValoresInterface(configuracao);
		
		// Após a inicialização da configuração
		document.addEventListener('DOMContentLoaded', function() {
			// Inicializar configurações
			const configuracao = new ConfiguracaoSplitPayment();
			configuracao.carregarConfiguracoes();
			
			// Exposição global da configuração
			window.configuracaoSplitPayment = configuracao;
			
			// Conectar formulário de configurações setoriais
			const btnSalvarConfiguracoes = document.getElementById('btn-salvar-configuracoes');
			if (btnSalvarConfiguracoes) {
				btnSalvarConfiguracoes.addEventListener('click', function() {
					// Capturar alíquotas base
					const aliquotaCBS = parseFloat(document.getElementById('aliquota-cbs').value) / 100;
					const aliquotaIBS = parseFloat(document.getElementById('aliquota-ibs').value) / 100;
					configuracao.atualizarAliquotasBase(aliquotaCBS, aliquotaIBS);
					
					// Capturar cronograma de implementação
					for (let ano = 2026; ano <= 2033; ano++) {
						const inputPerc = document.querySelector(`input[name="perc-${ano}"]`);
						if (inputPerc) {
							const percentual = parseFloat(inputPerc.value) / 100;
							configuracao.atualizarCronograma(ano, percentual);
						}
					}
					
					// Capturar configurações setoriais (este é um exemplo simplificado)
					const tabela = document.getElementById('sector-table');
					if (tabela) {
						const linhas = tabela.querySelectorAll('tbody tr');
						linhas.forEach(linha => {
							const id = linha.id.replace('setor-', '');
							const inputNome = linha.querySelector(`input[name="setor-nome-${id}"]`);
							const inputAliquota = linha.querySelector(`input[name="setor-aliquota-${id}"]`);
							const inputReducao = linha.querySelector(`input[name="setor-reducao-${id}"]`);
							
							if (inputNome && inputAliquota) {
								const codigoSetor = inputNome.value.toLowerCase().replace(/\s+/g, '_');
								configuracao.configurarSetor(codigoSetor, {
									nome: inputNome.value,
									aliquota_efetiva: parseFloat(inputAliquota.value) / 100,
									reducao_especial: parseFloat(inputReducao.value) / 100
								});
							}
						});
					}
					
					// Salvar configurações
					if (configuracao.salvarConfiguracoes()) {
						alert('Configurações salvas com sucesso!');
					} else {
						alert('Erro ao salvar configurações. Verifique o console para mais detalhes.');
					}
				});
			}
			
			// Botão para restaurar padrões
			const btnRestaurarPadroes = document.getElementById('btn-restaurar-padroes');
			if (btnRestaurarPadroes) {
				btnRestaurarPadroes.addEventListener('click', function() {
					if (confirm('Tem certeza que deseja restaurar todas as configurações para o padrão original?')) {
						configuracao.restaurarPadroes();
						// Recarregar a página para atualizar a interface
						location.reload();
					}
				});
			}
		});
	</script>
    <!-- Script unificado para navegação de abas -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Implementação do sistema de navegação por abas
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // Remover classe active de todas as abas
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Adicionar classe active à aba clicada
                    this.classList.add('active');

                    // Mostrar conteúdo correspondente
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
        });
        
        /**
		 * FormatacaoInicializacaoHelper - Módulo para inicialização formatada
		 * Complementa o FormatacaoHelper existente ao aplicar formatação aos campos
		 * no momento da inicialização da página
		 * 
		 * © 2025 Expertzy Inteligência Tributária
		 */
		const FormatacaoInicializacaoHelper = {
			/**
			 * Inicializa todos os campos monetários com formatação adequada
			 * @param {ConfiguracaoSplitPayment} config - Configuração do Split Payment
			 */
			inicializarCamposMonetarios(config) {
				// Seleciona todos os inputs monetários
				document.querySelectorAll('.money-input, input[type="number"][min="0"][step]').forEach(input => {
					// Verifica se o campo já tem um valor explícito
					const valorAtual = input.value;
					if (valorAtual !== "" && !isNaN(parseFloat(valorAtual))) {
						// Converte para número e formata
						const valor = config.converterMoedaParaNumero(valorAtual);
						input.value = config.formatarMoeda(valor, false);
					} else {
						// Para campos sem valor, define um valor vazio (mais amigável)
						input.value = "";
						
						// Define um placeholder formatado
						input.placeholder = config.formatarMoeda(0, false);
					}
					
					// Mantém os event listeners para formatação durante o uso
					FormatacaoHelper.formatarInputMonetario(input, config);
				});
			},
			
			/**
			 * Inicializa todos os campos percentuais com formatação adequada
			 * @param {ConfiguracaoSplitPayment} config - Configuração do Split Payment
			 */
			inicializarCamposPercentuais(config) {
				// Seleciona todos os inputs percentuais
				document.querySelectorAll('.percent-input, input[type="number"][min="0"][max="100"][step]').forEach(input => {
					// Verifica se o campo já tem um valor explícito
					const valorAtual = input.value;
					if (valorAtual !== "" && !isNaN(parseFloat(valorAtual))) {
						// Converte para número decimal e formata
						const valor = parseFloat(valorAtual) / 100;
						input.value = config.formatarPercentual(valor, false);
					} else {
						// Para campos sem valor, define um valor vazio (mais amigável)
						input.value = "";
						
						// Define um placeholder formatado
						input.placeholder = config.formatarPercentual(0, false);
					}
					
					// Mantém os event listeners para formatação durante o uso
					FormatacaoHelper.formatarInputPercentual(input, config);
				});
			},
			
			/**
			 * Configura automaticamente a formatação para todos os inputs no carregamento
			 * @param {ConfiguracaoSplitPayment} config - Configuração do Split Payment
			 */
			inicializarTodosCampos(config) {
				// Chama os dois métodos para inicializar todos os campos
				this.inicializarCamposMonetarios(config);
				this.inicializarCamposPercentuais(config);
				
				console.log('Formatação inicial aplicada com sucesso');
			}
		};
        
        document.addEventListener('DOMContentLoaded', function() {
			// Inicializar configurações
			const configuracao = new ConfiguracaoSplitPayment();
			configuracao.carregarConfiguracoes();
			
			// Exposição global da configuração
			window.configuracaoSplitPayment = configuracao;
			
			// Configurar formatação de inputs
			FormatacaoHelper.configurarInputsMonetarios(configuracao);
			FormatacaoHelper.configurarInputsPercentuais(configuracao);
			
			// Carregar valores na interface com formatação
			carregarValoresInterface(configuracao);
			
			// Configurar event listeners
			configurarEventListeners(configuracao);
		});
		
		// Adicionar após o script existente
		document.addEventListener('DOMContentLoaded', function() {
			// Controles para a aba Memória de Cálculo
			const cenarioSelect = document.getElementById('cenario-select');
			const periodoSelect = document.getElementById('periodo-select');
			const filtroFluxoAtual = document.getElementById('filtro-fluxo-atual');
			const filtroFluxoSplit = document.getElementById('filtro-fluxo-split');
			const filtroImpacto = document.getElementById('filtro-impacto');
			const filtroEstrategias = document.getElementById('filtro-estrategias');
			const btnExportarTxt = document.getElementById('btn-exportar-txt');
			const btnExportarPdf = document.getElementById('btn-exportar-pdf');
			const btnCopiar = document.getElementById('btn-copiar');
			const mostrarLinhas = document.getElementById('mostrar-linhas');
			const lineNumbers = document.getElementById('line-numbers');
			
			// Implementar a funcionalidade de mostrar/ocultar números de linha
			if (mostrarLinhas) {
				mostrarLinhas.addEventListener('change', function() {
					if (lineNumbers) {
						lineNumbers.style.display = this.checked ? 'block' : 'none';
					}
				});
			}
			
			// Ativar a funcionalidade de alternar perguntas do FAQ
			const faqQuestions = document.querySelectorAll('.faq-question');
			faqQuestions.forEach(question => {
				question.addEventListener('click', function() {
					this.classList.toggle('active');
					const answer = this.nextElementSibling;
					answer.style.display = answer.style.display === 'block' ? 'none' : 'block';
				});
			});
			
			// Implementar as demais funcionalidades conforme necessário
		});
		
		// Adicionar após o script existente
		function toggleFAQ(element) {
			// Encontrar o elemento de resposta associado à pergunta
			const answer = element.nextElementSibling;
			
			// Alternar a visibilidade da resposta
			if (answer.style.display === 'block') {
				answer.style.display = 'none';
			} else {
				answer.style.display = 'block';
			}
		}

		// Implementar navegação entre seções de ajuda
		document.addEventListener('DOMContentLoaded', function() {
			const helpNavLinks = document.querySelectorAll('.help-nav-link');
			
			helpNavLinks.forEach(link => {
				link.addEventListener('click', function(e) {
					e.preventDefault();
					
					// Remover classe active de todas as seções e links
					document.querySelectorAll('.help-section').forEach(section => {
						section.classList.remove('active');
					});
					
					document.querySelectorAll('.help-nav-link').forEach(navLink => {
						navLink.classList.remove('active');
					});
					
					// Adicionar classe active ao link clicado
					this.classList.add('active');
					
					// Mostrar a seção correspondente
					const targetId = this.getAttribute('data-target');
					const targetSection = document.getElementById(targetId);
					
					if (targetSection) {
						targetSection.classList.add('active');
					}
				});
			});
		});
				
		// Função para carregar valores da configuração na interface
		function carregarValoresInterface(configuracao) {
			// Carregar alíquotas base
			const inputCBS = document.getElementById('aliquota-cbs');
			const inputIBS = document.getElementById('aliquota-ibs');
			
			if (inputCBS) inputCBS.value = configuracao.formatarPercentual(configuracao.aliquotas_base.CBS, true);
			if (inputIBS) inputIBS.value = configuracao.formatarPercentual(configuracao.aliquotas_base.IBS, true);
			
			// Carregar cronograma
			for (let ano = 2026; ano <= 2033; ano++) {
				const inputPerc = document.querySelector(`input[name="perc-${ano}"]`);
				if (inputPerc && configuracao.cronograma_implementacao[ano] !== undefined) {
					inputPerc.value = configuracao.formatarPercentual(configuracao.cronograma_implementacao[ano], true);
				}
			}
			
			// Carregar dados setoriais
			Object.keys(configuracao.setores_especiais).forEach((codigoSetor, index) => {
				const setor = configuracao.setores_especiais[codigoSetor];
				const id = index + 1; // Assumindo que os IDs começam em 1
				
				const inputNome = document.querySelector(`input[name="setor-nome-${id}"]`);
				const inputAliquota = document.querySelector(`input[name="setor-aliquota-${id}"]`);
				const inputReducao = document.querySelector(`input[name="setor-reducao-${id}"]`);
				
				if (inputNome) inputNome.value = setor.nome;
				if (inputAliquota) inputAliquota.value = configuracao.formatarPercentual(setor.aliquota_efetiva, true);
				if (inputReducao) inputReducao.value = configuracao.formatarPercentual(setor.reducao_especial, true);
			});
			
			// Carregar parâmetros financeiros
			const taxaAntecipacao = document.getElementById('taxa-antecipacao');
			const taxaCapitalGiro = document.getElementById('taxa-capital-giro');
			const spreadBancario = document.getElementById('spread-bancario');
			
			if (taxaAntecipacao) {
				taxaAntecipacao.value = configuracao.formatarPercentual(
					configuracao.parametros_fluxo_caixa.taxa_antecipacao_recebiveis, true
				);
			}
			
			if (taxaCapitalGiro) {
				taxaCapitalGiro.value = configuracao.formatarPercentual(
					configuracao.parametros_fluxo_caixa.taxa_capital_giro, true
				);
			}
			
			if (spreadBancario) {
				spreadBancario.value = configuracao.formatarPercentual(
					configuracao.parametros_fluxo_caixa.spread_bancario, true
				);
			}
		}

		// Configurar event listeners para campos relacionados
		function configurarEventListeners(configuracao) {
			// Calcular automaticamente o ciclo financeiro
			const pmrInput = document.getElementById('pmr');
			const pmpInput = document.getElementById('pmp');
			const pmeInput = document.getElementById('pme');
			const cicloFinanceiroInput = document.getElementById('ciclo-financeiro');
			
			function atualizarCicloFinanceiro() {
				if (pmrInput && pmpInput && pmeInput && cicloFinanceiroInput) {
					const pmr = parseInt(pmrInput.value) || 0;
					const pmp = parseInt(pmpInput.value) || 0;
					const pme = parseInt(pmeInput.value) || 0;
					
					// Cálculo do ciclo financeiro
					const ciclo = pmr + pme - pmp;
					cicloFinanceiroInput.value = ciclo;
				}
			}
			
			// Adicionar listeners para os campos do ciclo financeiro
			if (pmrInput) pmrInput.addEventListener('change', atualizarCicloFinanceiro);
			if (pmpInput) pmpInput.addEventListener('change', atualizarCicloFinanceiro);
			if (pmeInput) pmeInput.addEventListener('change', atualizarCicloFinanceiro);
			
			// Calcular vendas a prazo a partir das vendas à vista
			const percVistaInput = document.getElementById('perc-vista');
			const percPrazoInput = document.getElementById('perc-prazo');

			// Definir o campo de Prazo como somente leitura
			if (percPrazoInput) {
				percPrazoInput.setAttribute('readonly', 'readonly');
				percPrazoInput.style.backgroundColor = '#f8f9fa';
			}

			const atualizarPercPrazo = () => {
				if (percVistaInput && percPrazoInput) {
					// Tratar a entrada para aceitar apenas números e vírgula
					if (percVistaInput.value) {
						// Remover formatação para processamento
						let valor = percVistaInput.value.replace(/[^\d,]/g, '');

						// Garantir apenas uma vírgula
						const partes = valor.split(',');
						if (partes.length > 2) {
							valor = partes[0] + ',' + partes.slice(1).join('');
						}

						// Limitar a 2 casas decimais
						if (partes.length === 2 && partes[1].length > 2) {
							valor = partes[0] + ',' + partes[1].substring(0, 2);
						}

						// Converter para número para cálculo
						let percVista = this.config.converterPercentualParaNumero(valor);

						// Limitar a 100%
						if (percVista > 1) percVista = 1;

						// Calcular o percentual a prazo
						const percPrazo = 1 - percVista;

						// Atualizar o campo de à vista com novo valor formatado
						percVistaInput.value = valor;

						// Atualizar o campo a prazo
						percPrazoInput.value = this.config.formatarPercentual(percPrazo);
					} else {
						// Valor padrão se vazio
						percVistaInput.value = '30,00%';
						percPrazoInput.value = '70,00%';
					}
				}
			};

			if (percVistaInput) {
				// Remover eventos antigos (evitar duplicação)
				const newPercVistaInput = percVistaInput.cloneNode(true);
				percVistaInput.parentNode.replaceChild(newPercVistaInput, percVistaInput);
				percVistaInput = newPercVistaInput;

				// Adicionar evento para entrada direta
				percVistaInput.addEventListener('input', function() {
					// Permitir apenas números e vírgula
					let valor = this.value.replace(/[^\d,]/g, '');

					// Garantir apenas uma vírgula
					const partes = valor.split(',');
					if (partes.length > 2) {
						valor = partes[0] + ',' + partes.slice(1).join('');
					}

					// Atualizar o valor no campo
					this.value = valor;

					// Recalcular o campo a prazo
					atualizarPercPrazo.call(SimuladorApp);
				});

				// Evento ao perder foco para formatar corretamente
				percVistaInput.addEventListener('blur', function() {
					if (this.value) {
						const valor = SimuladorApp.config.converterPercentualParaNumero(this.value);
						this.value = SimuladorApp.config.formatarPercentual(valor);
					} else {
						// Valor padrão
						this.value = SimuladorApp.config.formatarPercentual(0.3);
					}
					atualizarPercPrazo.call(SimuladorApp);
				});

				// Inicializar com valor padrão se vazio
				if (!percVistaInput.value) {
					percVistaInput.value = this.config.formatarPercentual(0.3);
					atualizarPercPrazo();
				}
			}
			
			// Inicializar cálculos
			atualizarCicloFinanceiro();
			atualizarPercPrazo();
			
			// Inicializar campos de estratégias (exemplo para elasticidade e impacto nas vendas)
			const elasticidadeInput = document.getElementById('elasticidade');
			const impactoVendasInput = document.getElementById('impacto-vendas');
			const percAumentoInput = document.getElementById('perc-aumento');
			
			function atualizarImpactoVendas() {
				if (elasticidadeInput && impactoVendasInput && percAumentoInput) {
					const elasticidade = parseFloat(elasticidadeInput.value) || 0;
					const percAumento = configuracao.converterPercentualParaNumero(percAumentoInput.value) || 0;
					
					// Cálculo do impacto nas vendas (elasticidade * variação percentual)
					const impacto = elasticidade * percAumento;
					impactoVendasInput.value = configuracao.formatarPercentual(impacto, true);
				}
			}
			
			// Adicionar listeners para os campos de elasticidade
			if (elasticidadeInput) elasticidadeInput.addEventListener('change', atualizarImpactoVendas);
			if (percAumentoInput) percAumentoInput.addEventListener('change', atualizarImpactoVendas);
			
			// Inicializar cálculos de elasticidade
			atualizarImpactoVendas();
			
			// Implementar outros cálculos automáticos conforme necessário
		}

		// Função para inicialização geral da página
		function inicializarPagina() {
			// Inicializar configurações
			const configuracao = new ConfiguracaoSplitPayment();
			configuracao.carregarConfiguracoes();
			
			// Exposição global da configuração
			window.configuracaoSplitPayment = configuracao;
			
			// Configurar formatação nos inputs
			FormatacaoHelper.configurarTodosInputs(configuracao);
			
			// Carregar valores na interface com formatação adequada
			carregarValoresInterface(configuracao);
			
			// Configurar event listeners para campos relacionados
			configurarEventListeners(configuracao);
			
			console.log('Inicialização da página concluída com sucesso');
		}

		// Inicializar a página quando o DOM estiver pronto
		document.addEventListener('DOMContentLoaded', inicializarPagina);
		
		// Salvar valores dos campos no formulário para a configuração
		function salvarFormularioParaConfiguracao(configuracao) {
			// Capturar alíquotas base
			const inputCBS = document.getElementById('aliquota-cbs');
			const inputIBS = document.getElementById('aliquota-ibs');
			
			if (inputCBS) {
				const aliquotaCBS = configuracao.converterPercentualParaNumero(inputCBS.value);
				configuracao.aliquotas_base.CBS = aliquotaCBS;
			}
			
			if (inputIBS) {
				const aliquotaIBS = configuracao.converterPercentualParaNumero(inputIBS.value);
				configuracao.aliquotas_base.IBS = aliquotaIBS;
			}
			
			// Capturar cronograma de implementação
			for (let ano = 2026; ano <= 2033; ano++) {
				const inputPerc = document.querySelector(`input[name="perc-${ano}"]`);
				if (inputPerc) {
					const percentual = configuracao.converterPercentualParaNumero(inputPerc.value);
					configuracao.cronograma_implementacao[ano] = percentual;
				}
			}
			
			// Capturar demais valores monetários e percentuais
			// Exemplo para taxas
			const taxaAntecipacao = document.getElementById('taxa-antecipacao');
			if (taxaAntecipacao) {
				configuracao.parametros_fluxo_caixa.taxa_antecipacao_recebiveis = 
					configuracao.converterPercentualParaNumero(taxaAntecipacao.value);
			}
			
			// Salvar configurações
			configuracao.salvarConfiguracoes();
		}				
		
		// Exemplo de exibição de resultados formatados
		function exibirResultadosSimulacao(simulador, configuracao) {
			const resultadosDiv = document.getElementById('resultados');
			if (!resultadosDiv) return;
			
			// Exemplo: exibir valor do impacto do Split Payment
			const faturamento = 1000000; // R$ 1.000.000,00
			const ano = 2026;
			const setor = 'comercio';
			
			const impacto = configuracao.calcularImpactoFinanceiro(faturamento, ano, setor);
			const impactoFormatado = configuracao.formatarMoeda(impacto);
			
			resultadosDiv.innerHTML = `
				<div class="result-card">
					<h3>Resultados da Simulação</h3>
					<p>Faturamento: ${configuracao.formatarMoeda(faturamento)}</p>
					<p>Ano: ${ano}</p>
					<p>Setor: ${configuracao.setores_especiais[setor].nome}</p>
					<p>Alíquota Efetiva: ${configuracao.obterAliquotaEfetivaSetor(setor, true)}</p>
					<p>Percentual de Implementação: ${configuracao.obterPercentualImplementacao(ano, setor, true)}</p>
					<p>Impacto no Fluxo de Caixa: ${impactoFormatado}</p>
				</div>
			`;
		}
		
		function exibirResultadosSimulacao(dados, configuracao) {
			const faturamento = dados.faturamento;
			const aliquota = dados.aliquota;
			const valorImposto = faturamento * aliquota;
			
			const resultadoHTML = `
				<div class="result-card">
					<h3>Resultados da Simulação</h3>
					<table class="result-table">
						<tr>
							<td>Faturamento:</td>
							<td>${configuracao.formatarMoeda(faturamento)}</td>
						</tr>
						<tr>
							<td>Alíquota Efetiva:</td>
							<td>${configuracao.formatarPercentual(aliquota)}</td>
						</tr>
						<tr>
							<td>Valor do Imposto:</td>
							<td>${configuracao.formatarMoeda(valorImposto)}</td>
						</tr>
					</table>
				</div>
			`;
			
			document.getElementById('resultados').innerHTML = resultadoHTML;
		}
		
		// Tratamento específico para o campo de Faturamento
		// Tratamento específico para os campos monetários
		document.addEventListener('DOMContentLoaded', function() {
			// Função para configurar formatação de campos monetários
			function configurarCampoMonetario(idCampo) {
				const campo = document.getElementById(idCampo);
				if (!campo) return;

				// Garantir que seja tipo text
				campo.type = 'text';

				// Remover outras classes para evitar formatação dupla
				campo.classList.remove('money-input');

				// Limpar formatação inicial
				campo.value = '';

				// Função para formatar valor como moeda
				function formatarMoeda(valor) {
					valor = valor.toString().replace(/\D/g, '');
					if (valor === '') return '';

					valor = (parseInt(valor, 10) / 100).toFixed(2);
					return 'R$ ' + valor.replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
				}

				// Evento de input
				campo.addEventListener('input', function(e) {
					const posicaoCursor = this.selectionStart || 0;
					const valorAntigo = this.value;

					// Remover formatação
					let numeros = valorAntigo.replace(/\D/g, '');

					// Não permitir números muito grandes para evitar overflow
					if (numeros.length > 15) {
						numeros = numeros.substring(0, 15);
					}

					// Formatar
					const valorFormatado = formatarMoeda(numeros);

					// Atualizar valor apenas se necessário
					if (valorFormatado !== valorAntigo) {
						this.value = valorFormatado;

						// Restaurar cursor para uma posição razoável
						const novaPosicao = Math.min(
							posicaoCursor + (valorFormatado.length - valorAntigo.length),
							valorFormatado.length
						);

						setTimeout(() => {
							this.setSelectionRange(novaPosicao, novaPosicao);
						}, 0);
					}
				});

				// Evento de perda de foco
				campo.addEventListener('blur', function() {
					if (!this.value) {
						this.value = 'R$ 0,00';
					}
				});

				// Evento de ganho de foco
				campo.addEventListener('focus', function() {
					if (this.value === 'R$ 0,00') {
						this.value = '';
					}

					// Posicionar cursor no final
					setTimeout(() => {
						this.selectionStart = this.selectionEnd = this.value.length;
					}, 0);
				});
			}

			// Configurar campos monetários
			configurarCampoMonetario('faturamento');
			configurarCampoMonetario('creditos');
		});
		/**
		 * Função para conectar os botões às funções de simulação
		 */
		function conectarBotoes() {
			// Botão Simular
			const btnSimular = document.getElementById('btn-simular');
			if (btnSimular) {
				// Remover event listeners existentes para evitar duplicação
				const novoBtn = btnSimular.cloneNode(true);
				btnSimular.parentNode.replaceChild(novoBtn, btnSimular);
				
				// Adicionar novo event listener
				novoBtn.addEventListener('click', function() {
					console.log('Botão Simular clicado');
					SimuladorApp.realizarSimulacao();
				});
			} else {
				console.error('Botão Simular não encontrado no DOM');
			}
			
			// Botão Limpar
			const btnLimpar = document.getElementById('btn-limpar');
			if (btnLimpar) {
				// Remover event listeners existentes para evitar duplicação
				const novoBtn = btnLimpar.cloneNode(true);
				btnLimpar.parentNode.replaceChild(novoBtn, btnLimpar);
				
				// Adicionar novo event listener
				novoBtn.addEventListener('click', function() {
					console.log('Botão Limpar clicado');
					SimuladorApp.limparFormulario();
				});
			} else {
				console.error('Botão Limpar não encontrado no DOM');
			}
		}

		// Chamar a função após o carregamento do DOM
		document.addEventListener('DOMContentLoaded', conectarBotoes);
    </script>
	
</body>
</html>
